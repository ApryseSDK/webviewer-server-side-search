{"version":3,"sources":["webpack:///./src/ui/src/components/Note/Context.js","webpack:///./src/ui/src/helpers/setAnnotationRichTextStyle.js","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/NoteTextarea.js","webpack:///./src/ui/src/components/NoteTextarea/index.js","webpack:///./src/ui/src/helpers/NoteStateUtils.js","webpack:///./src/ui/src/components/ModularComponents/NoteStateFlyout/NoteStateFlyout.js","webpack:///./src/ui/src/components/ModularComponents/NoteStateFlyout/index.js","webpack:///./src/ui/src/constants/quill.scss?ee40","webpack:///./src/ui/src/constants/quill.scss","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss?e393","webpack:///./src/ui/src/components/NoteTextarea/CommentTextarea/CommentTextarea.scss","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss?1d48","webpack:///./src/ui/src/components/NotePopup/NotePopup.scss","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss?f278","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.scss","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss?6b77","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.scss","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss?62b0","webpack:///./src/ui/src/components/NoteContent/NoteContent.scss","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss?59a5","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.scss","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss?7f2c","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.scss","webpack:///./src/ui/src/components/Note/Note.scss?66f6","webpack:///./src/ui/src/components/Note/Note.scss","webpack:///./src/ui/src/components/NotesPanel/ReplyAttachmentPicker.js","webpack:///./src/ui/src/components/NotePopup/NotePopup.js","webpack:///./src/ui/src/components/NotePopup/NotePopupContainer.js","webpack:///./src/ui/src/components/NotePopup/index.js","webpack:///./src/ui/src/components/NoteState/NoteState.js","webpack:///./src/ui/src/components/NoteState/NoteStateContainer.js","webpack:///./src/ui/src/components/NoteState/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicator.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/index.js","webpack:///./src/ui/src/components/NoteUnpostedCommentIndicator/NoteUnpostedCommentIndicatorContainer.js","webpack:///./src/ui/src/components/NoteHeader/NoteHeader.js","webpack:///./src/ui/src/components/NoteHeader/index.js","webpack:///./src/ui/src/components/NoteTextPreview/NoteTextPreviewContainer.js","webpack:///./src/ui/src/components/NoteTextPreview/index.js","webpack:///./src/ui/src/helpers/ReplyAttachmentManager.js","webpack:///./src/ui/src/helpers/sanitizeSVG.js","webpack:///./src/ui/src/components/ReplyAttachmentList/ReplyAttachmentList.js","webpack:///./src/ui/src/components/ReplyAttachmentList/index.js","webpack:///./src/ui/src/helpers/setReactQuillContent.js","webpack:///./src/ui/src/components/NoteContent/NoteContent.js","webpack:///./src/ui/src/components/NoteContent/index.js","webpack:///./src/ui/src/components/Note/ReplyArea/ReplyArea.js","webpack:///./src/ui/src/components/Note/ReplyArea/index.js","webpack:///./src/ui/src/components/Note/NoteGroupSection.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/AnnotationNoteConnectorLine.js","webpack:///./src/ui/src/components/AnnotationNoteConnectorLine/index.js","webpack:///./src/ui/src/components/Note/Note.js","webpack:///./src/ui/src/components/Note/index.js","webpack:///./src/ui/src/components/InlineCommentingPopup/InlineCommentingPopup.scss?7354","webpack:///./src/ui/src/components/InlineCommentingPopup/InlineCommentingPopup.scss","webpack:///./src/ui/src/components/InlineCommentingPopup/InlineCommentingPopup.js","webpack:///./src/ui/src/components/InlineCommentingPopup/InlineCommentingPopupContainer.js","webpack:///./src/ui/src/components/InlineCommentingPopup/index.js"],"names":["NoteContext","React","createContext","setAnnotationRichTextStyle","editor","annotation","richTextStyle","ops","getContents","breakpoint","forEach","item","attributes","isMention","insert","mention","value","denotationChar","cssStyle","undefined","bold","italic","color","underline","strike","size","font","length","setRichTextStyle","i","globalUserData","formats","Keyboard","Quill","CustomKeyboard","DEFAULTS","bindings","register","Clipboard","Delta","quillShadowDOMWorkaround","window","Core","QuillPasteExtra","quill","options","keepSelection","range","this","getSelection","delta","retain","index","setSelection","sources","SILENT","mentionModule","allowedChars","mentionDenotationChars","mentionContainerClass","mentionListClass","listItemClass","renderItem","div","document","createElement","innerText","email","para","className","appendChild","source","searchTerm","renderList","mentionsSearchFunction","mentionsManager","getMentionLookupCallback","foundUsers","CommentTextarea","forwardRef","ref","onChange","onKeyDown","onBlur","onFocus","userData","isReply","t","useTranslation","isAddReplyAttachmentDisabled","useSelector","state","selectors","isElementDisabled","DataElements","NotesPanel","ADD_REPLY_ATTACHMENT_BUTTON","contentArray","split","pop","map","paragraph","outerHTML","join","onClick","e","preventDefault","stopPropagation","onScroll","style","overflowY","modules","theme","placeholder","aria-label","Button","dataElement","img","getRootNode","querySelector","click","displayName","propTypes","PropTypes","string","func","isRequired","onSubmit","NoteTextarea","props","forwardedRef","getUserData","isNoteSubmissionWithEnterEnabled","getAutoFocusNoteOnAnnotationSelection","getIsNoteEditing","shallowEqual","canSubmitByEnter","resize","useContext","textareaRef","useRef","prevHeightRef","useLayoutEffect","boxDOMElement","current","container","firstElementChild","boundingBox","getBoundingClientRect","height","textareaProps","el","throttle","content","getText","trim","target","doesDeltaContainMention","formattedText","getFormattedTextFromDeltas","mentionData","extractMentionDataFromStr","totalTextLength","plainTextValue","textareaEditor","setTimeout","which","isSubmittingByEnter","isSubmittingByCtrlEnter","metaKey","ctrlKey","createStateAnnotation","documentViewerKey","stateAnnotation","Annotations","StickyAnnotation","core","getCurrentUser","enableSkipAutoLink","displayAuthor","getDisplayAuthor","stateMessage","i18next","toLowerCase","contents","setContents","createFlyoutItem","option","icon","label","title","noteStateFlyoutItems","NoteStateFlyout","noteId","handleStateChange","isMultiSelectMode","dispatch","useDispatch","selectorSuffix","flyoutSelector","NOTE_STATE_FLYOUT","currentFlyout","getFlyout","noteStateFlyout","items","noteState","actions","updateFlyout","addFlyout","bool","api","__esModule","default","module","styleTag","isApryseWebViewerWebComponent","head","webComponents","getElementsByTagName","findNestedWebComponents","tagName","root","elements","querySelectorAll","push","shadowRoot","clonedStyleTags","webComponent","onload","styleNode","innerHTML","cloneNode","exports","locals","ReplyAttachmentPicker","annotationId","addAttachments","replyAttachmentHandler","getReplyAttachmentHandler","file","files","attachment","url","name","type","id","display","handleEdit","handleDelete","closePopup","openPopup","isEditable","isDeletable","isOpen","noop","NotePopup","popupRef","customizableUI","getFeatureFlags","useOnClickOutside","notePopupButtonClass","classNames","active","optionsClass","DataElementWrapper","isActive","NotePopupContainer","activeDocumentViewerKey","getActiveDocumentViewerKey","setIsEditing","noteIndex","useState","canModify","setCanModify","canModifyContents","setCanModifyContents","setIsOpen","useEffect","onUpdateAnnotationPermission","addEventListener","removeEventListener","passProps","useCallback","FreeTextAnnotation","getAnnotationManager","isFreeTextEditingEnabled","trigger","deleteAnnotations","getGroupedChildren","NoDelete","Tooltip","object","NoteState","annotationState","getStatus","Id","ToggleElementButton","toggleElement","NoteStateContainer","isNoteStateDisabled","useFocusOnClose","newValue","addReply","annotationManager","addAnnotation","getRootAnnotation","NoteUnpostedCommentIndicator","pendingEditTextMap","pendingReplyMap","pendingAttachmentMap","hasUnpostedComment","setHasUnpostedComment","hasUnpostedReply","setHasUnpostedReply","hasUnpostedAttachment","setHasUnpostedAttachment","data-element","Icon","glyph","NoteUnpostedCommentIndicatorContainer","isDisabled","iconColor","fillColor","language","noteDateFormat","isSelected","notesShowLastUpdatedDate","isUnread","renderAuthorName","isEditing","number","sortStrategy","activeTheme","isMultiSelected","handleMultiSelect","isGroupMember","showAnnotationNumbering","isTrackedChange","NoteHeader","date","timezone","dateCreated","NotesPanelSortStrategy","MODIFIED_DATE","CREATED_DATE","getLatestActivityDate","DateCreated","datetimeStr","toLocaleString","timeZone","Date","numberOfReplies","getReplies","toHexString","Theme","DARK","isDarkColorHex","COMMON_COLORS","LIGHT","isLightColorHex","getColor","FillColor","annotationAssociatedNumber","getAssociatedNumber","annotationDisplayedAssociatedNumber","authorAndDateClass","noteHeaderClass","parent","dayjs","locale","format","PageNumber","Choice","checked","trackedChangeId","getCustomData","OFFICE_EDITOR_TRACKED_CHANGE_KEY","getOfficeEditor","acceptTrackedChange","rejectTrackedChange","NoteTextPreviewContainer","notePanelWidth","getNotesPanelWidth","NoteTextPreview","panelWidth","icons","FileAttachmentUtils","decompressFileContent","decompressWithFlateDecode","setAnnotationAttachments","setAttachments","isImage","startsWith","getAttachmentIcon","readAsText","svg","Promise","resolve","toString","fileReader","FileReader","result","isSVG","sanitizeSVG","svgText","forbiddenTags","DOMPurify","addHook","_","hookEvent","allowedTags","clean","sanitize","Blob","isDirty","ImagePreview","src","setSrc","isDirtySVG","setIsDirtySvg","fileToSanitize","isImageFromPDF","File","URL","createObjectURL","processImagePreview","ReplyAttachmentList","fileDeleted","getTabManager","isReplyAttachmentPreviewEnabled","tabManager","previewEnabled","console","warn","fileData","addTab","filename","setActive","saveCurrentActiveTabState","onDownload","saveAs","key","onDelete","getAttributtes","element","attr","decoration","includes","setReactQuillContent","getRichTextStyle","indexes","Object","keys","text","isNaN","lastIndex","textSlice","slice","extend","LocalizedFormat","isNonReplyNoteRead","onReplyClicked","NoteContent","getNoteDateFormat","getIconColor","mapAnnotationToKey","getCurrentLanguage","canCollapseTextPreview","isNotesPanelTextCollapsingEnabled","canCollapseReplyPreview","isNotesPanelRepliesCollapsingEnabled","getActiveTheme","getTimezone","searchInput","onTopNoteContentClicked","setPendingEditText","annotationMapKeys","TRACKED_CHANGE","attachments","getAttachments","annotationChangedListener","annotations","action","annot","useDidUpdate","finishNoteEditing","customData","highlightSearchInput","skipAutoLink","getSkipAutoLink","renderContents","fontColor","autolinkerContent","Autolinker","link","stripPrefix","stripTrailingSlash","replaceFn","match","href","getAnchorHref","anchorText","getAnchorText","offset","getOffset","getType","start","end","getMatchedText","highlightResult","linesToBreak","comment","renderRichText","beforeContent","fontWeight","contentToRender","strIdx","anchorData","forIdx","rel","getDataWithKey","JSON","parse","contentsToRender","textColor","Color","a","textAreaValue","thereIsNoUnpostedEdit","handleContentsClicked","noteContentClass","unread","clicked","useMemo","contentStyle","onTextAreaValueChange","pendingText","textPreview","highlightSearchResult","shouldCollapseAnnotationText","isString","paddingRight","header","ContentArea","getIsMentionEnabled","INLINE_COMMENT_POPUP","isElementOpen","NOTES_PANEL","isAnyCustomPanelOpen","autoFocusNoteOnAnnotationSelection","isMentionEnabled","isInlineCommentDisabled","isInlineCommentOpen","isNotesPanelOpen","setCurAnnotId","deleteAttachment","clearAttachments","shouldNotFocusOnInput","isMobile","getEditor","setText","ids","focus","textLength","getLength","pendingAttachments","disableSkipAutoLink","extractMentionDataFromAnnot","mentions","setCustomData","stringify","drawAnnotationsFromList","contentClassName","relatedTarget","getAttribute","disabled","getRichTextSpan","fontStyle","textDecoration","replace","styles","indices","Number","sort","b","Math","min","max","styleIndices","fullText","loweredText","loweredSearchInput","lastFoundInstance","indexOf","allFoundPositions","regexSafeSearchInput","RegExp","test","position","idx","substring","ReplyArea","onPendingReplyChange","isDocumentReadOnly","getIsReplyDisabled","isReadOnly","isReplyDisabled","isReplyDisabledForAnnotation","isNoteEditingTriggeredByAnnotationPopup","isContentEditable","setPendingReply","isExpandedFromSearch","scrollToSelectedAnnot","isFocused","setIsFocused","postReply","replyText","replyAnnotation","createMentionReply","addAnnotations","createAnnotationReply","ifReplyNotAllowed","replyAreaClass","replyButtonClass","onMouseDown","handleNoteTextareaChange","isSubmitType","groupAnnotations","array","NoteGroupSection","isViewingGroupAnnots","setIsViewingGroupAnnots","ViewAllAnnotsButton","CloseAllAnnotsButton","groupAnnotation","selectAnnotation","jumpToAnnotation","openElement","LineConnectorPortal","children","mount","setAttribute","ANNOTATION_NOTE_CONNECTOR_LINE","removeChild","createPortal","AnnotationNoteConnectorLine","noteContainerRef","isCustomPanelOpen","getDocumentContainerWidth","getDocumentContainerHeight","lineIsOpen","notePanelIsOpen","isLineDisabled","documentContainerWidth","documentContainerHeight","rightHorizontalLineWidth","setRightHorizontalLineWidth","rightHorizontalLineTop","setRightHorizontalLineTop","rightHorizontalLineRight","setRightHorizontalLineRight","leftHorizontalLineWidth","setLeftHorizontalLineWidth","leftHorizontalLineTop","setLeftHorizontalLineTop","leftHorizontalLineRight","setLeftHorizontalLineRight","getAnnotationPosition","annotationBottomRight","bottomRight","annotationTopLeft","topLeft","getAnnotationLineOffset","Subject","getScrollViewElement","scrollTop","scrollLeft","closeElement","annotWidthInPixels","x","annotHeightInPixels","y","viewerWidth","host","clientWidth","innerWidth","viewerOffsetTop","offsetTop","top","lineWidth","noZoomRefPoint","getNoZoomReferencePoint","noZoomRefShiftX","NoZoom","noZoomRefShiftY","onPageNumberUpdated","verticalHeight","abs","verticalTop","width","right","isInNotesPanel","currId","Note","shouldHideConnectorLine","containerRef","containerHeightRef","isEditingMap","setIsEditingMap","unreadReplyIdSet","Set","getNoteTransformFunction","getCustomNoteSelectionFunction","getUnreadAnnotationIdSet","isCommentThreadExpansionEnabled","isRightClickAnnotationPopupEnabled","getIsOfficeEditorMode","getOfficeEditorEditMode","noteTransformFunction","customNoteSelectionFunction","unreadAnnotationIdSet","shouldExpandCommentThread","isOfficeEditorMode","officeEditorEditMode","replies","filter","r","has","add","setAnnotationReadState","isRead","prevHeight","currHeight","round","notesPanelElement","child","parentNode","handleNoteClick","deselectAllAnnotations","OFFICE_EDITOR_EDIT_MODE","PREVIEW","ANNOTATION_POPUP","moveCursorToTrackedChange","freezeMainCursor","hasUnreadReplies","noteClass","expanded","repliesClass","hidden","reply","showReplyArea","values","some","val","handleReplyClicked","markAllRepliesRead","repliesSetToRead","selectAnnotations","getGroupAnnotations","isGroup","lastReplyId","role","tabIndex","currentTarget","isUndraggable","isNotesPanelClosed","any","closeAndReset","commentingAnnotation","contextValue","annotationForAttachment","InlineCommentingPopup","isExpanded","setExpanded","inlineCommentPopup","Popup","open","trackedChangePopup","onMouseMove","INLINE_COMMENT_POPUP_EXPAND_BUTTON","INLINE_COMMENT_POPUP_CLOSE_BUTTON","Provider","cancel","InlineCommentingPopupContainer","getNotesInLeftPanel","LEFT_PANEL","getActiveLeftPanel","isAnnotationNumberingEnabled","getSortStrategy","notesInLeftPanel","isLeftPanelOpen","activeLeftPanel","left","setPosition","isPhone","isMobileDevice","isIE","isNotesPanelOpenOrActive","notesPanel","clickedInNotesPanel","contains","clickedInNoteStateFlyout","datePicker","getDatePicker","warningModal","getOpenedWarningModal","colorPicker","getOpenedColorPicker","setPopupPosition","getPopupPosition","handleResize","debounce","setPendingAttachmentMap","annotationID","setAnnotationForAttachment","setPendingEditTextMap","setPendingReplyMap","pendingReply","getDocument","workerTypes","OFFICE_EDITOR","attachmentList","splice"],"mappings":"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","file":"chunks/27.chunk.js","sourcesContent":["import React from 'react';\n\nconst NoteContext = React.createContext();\n\nexport default NoteContext;","const setAnnotationRichTextStyle = (editor, annotation) => {\n  const richTextStyle = {};\n  const ops = editor.getContents().ops;\n  let breakpoint = 0;\n  ops.forEach((item) => {\n    const attributes = item.attributes;\n    const isMention = item.insert?.mention;\n    let value = item.insert;\n    if (isMention) {\n      const mention = item.insert.mention;\n      value = mention.denotationChar + mention.value;\n    }\n    const cssStyle = {};\n    if (attributes === null || attributes === undefined ? undefined : attributes.bold) {\n      cssStyle['font-weight'] = 'bold';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.italic) {\n      cssStyle['font-style'] = 'italic';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.color) {\n      cssStyle['color'] = attributes.color;\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.underline) {\n      cssStyle['text-decoration'] = 'word';\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.strike) {\n      if (cssStyle['text-decoration']) {\n        cssStyle['text-decoration'] = `${cssStyle['text-decoration']} line-through`;\n      } else {\n        cssStyle['text-decoration'] = 'line-through';\n      }\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.size) {\n      cssStyle['font-size'] = attributes.size;\n    }\n    if (attributes === null || attributes === undefined ? undefined : attributes.font) {\n      cssStyle['font-family'] = attributes.font;\n    }\n\n    richTextStyle[breakpoint] = cssStyle;\n    breakpoint += value.length;\n  });\n  annotation.setRichTextStyle(richTextStyle);\n};\n\nexport default setAnnotationRichTextStyle;\n","import React from 'react';\nimport ReactQuill, { Quill } from 'react-quill';\nimport 'quill-mention';\nimport mentionsManager from 'helpers/MentionsManager';\nimport Button from 'components/Button';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport DataElements from 'constants/dataElement';\nimport selectors from 'selectors';\nimport getRootNode from 'helpers/getRootNode';\n\nimport '../../../constants/quill.scss';\nimport './CommentTextarea.scss';\n\nlet globalUserData = [];\n\n// These are the formats that will be accepted by quill\n// removed images and videos\nconst formats = [\n  'background',\n  'bold',\n  'color',\n  'font',\n  'code',\n  'italic',\n  'link',\n  'size',\n  'strike',\n  'script',\n  'underline',\n  'blockquote',\n  'header',\n  'indent',\n  'list',\n  'align',\n  'direction',\n  'code-block',\n  'formula',\n  'mention',\n];\n\n// We override the default keyboard module to disable the list autofill feature\nconst Keyboard = Quill.import('modules/keyboard');\n\nclass CustomKeyboard extends Keyboard {\n  static DEFAULTS = {\n    ...Keyboard.DEFAULTS,\n    bindings: {\n      ...Keyboard.DEFAULTS.bindings,\n      'list autofill': undefined,\n    }\n  }\n}\n\nQuill.register('modules/keyboard', CustomKeyboard, true);\n\n// Overriding clipboard module to fix cursor issue after pasting text\nconst Clipboard = Quill.import('modules/clipboard');\nconst Delta = Quill.import('delta');\nconst { quillShadowDOMWorkaround } = window.Core;\n\nclass QuillPasteExtra extends Clipboard {\n  constructor(quill, options) {\n    quillShadowDOMWorkaround(quill);\n    super(quill, options);\n    this.keepSelection = options.keepSelection;\n  }\n  onPaste() {\n    const range = this.quill.getSelection();\n    const delta = new Delta().retain(range.index).delete(range.length);\n    if (this.keepSelection) {\n      this.quill.setSelection(range.index, delta.length(), Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(range.index + delta.length(), Quill.sources.SILENT);\n    }\n  }\n}\nQuill.register('modules/clipboard', QuillPasteExtra, true);\n\n// mentionsModule has to be outside the funtion to be able to access it without it being destroyed and recreated\nconst mentionModule = {\n  mention: {\n    allowedChars: /^[A-Za-z\\s0-9\\-_]*$/,\n    mentionDenotationChars: ['@', '#'],\n    mentionContainerClass: 'mention__element',\n    mentionListClass: 'mention__suggestions__list',\n    listItemClass: 'mention__suggestions__item',\n    renderItem(item) {\n      // quill-mentions does not support jsx being returned\n      const div = document.createElement('div');\n      div.innerText = item.value;\n      if (item.email) {\n        const para = document.createElement('p');\n        para.innerText = item.email;\n        para.className = 'email';\n        div.appendChild(para);\n      }\n      return div;\n    },\n    async source(searchTerm, renderList) {\n      const mentionsSearchFunction = mentionsManager.getMentionLookupCallback();\n      const foundUsers = await mentionsSearchFunction(globalUserData, searchTerm);\n      renderList(foundUsers, searchTerm);\n    }\n  }\n};\n\nconst CommentTextarea = React.forwardRef(\n  (\n    {\n      value = '',\n      onChange,\n      onKeyDown,\n      onBlur,\n      onFocus,\n      userData,\n      isReply,\n    },\n    ref\n  ) => {\n    const [t] = useTranslation();\n\n    const isAddReplyAttachmentDisabled = useSelector((state) => selectors.isElementDisabled(state, DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON));\n\n    globalUserData = userData;\n\n    const addAttachment = () => {\n      getRootNode().querySelector('#reply-attachment-picker')?.click();\n    };\n\n    const onClick = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    const onScroll = (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n    };\n\n    // Convert text with newline (\"\\n\") to <p>...</p> format so\n    // that editor handles multiline text correctly\n    if (value) {\n      const contentArray = value.split('\\n');\n      if (contentArray.length && contentArray[contentArray.length - 1] === '') {\n        contentArray.pop();\n        value = contentArray.map((item) => {\n          const paragraph = document.createElement('p');\n          paragraph.innerText = item || '<br>';\n          return paragraph.outerHTML;\n        }\n        ).join('');\n      }\n    }\n\n    // onBlur and onFocus have to be outside in the div because of quill bug\n    return (\n      <div className='comment-textarea' onBlur={onBlur} onFocus={onFocus} onClick={onClick} onScroll={onScroll}>\n        <ReactQuill\n          className='comment-textarea ql-container ql-editor'\n          style={{ overflowY: 'visible' }}\n          ref={ref}\n          modules={userData && userData.length > 0 ? mentionModule : {}}\n          theme=\"snow\"\n          value={value}\n          placeholder={`${isReply ? t('action.reply') : t('action.comment')}...`}\n          aria-label={`${isReply ? t('action.reply') : t('action.comment')}...`}\n          onChange={onChange}\n          onKeyDown={onKeyDown}\n          formats={formats}\n        />\n        {isReply && !isAddReplyAttachmentDisabled &&\n          <Button\n            className='add-attachment'\n            dataElement={DataElements.NotesPanel.ADD_REPLY_ATTACHMENT_BUTTON}\n            img='ic_fileattachment_24px'\n            onClick={addAttachment}\n          />\n        }\n      </div>\n    );\n  });\n\nCommentTextarea.displayName = 'CommentTextarea';\n\nexport default CommentTextarea;\n","import React, { useLayoutEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport throttle from 'lodash/throttle';\nimport NoteContext from 'components/Note/Context';\nimport selectors from 'selectors';\nimport CommentTextarea from './CommentTextarea/CommentTextarea';\nimport mentionsManager from 'helpers/MentionsManager';\n\nconst propTypes = {\n  // same the value attribute of a HTML textarea element\n  value: PropTypes.string,\n  // same the placeholder attribute of a HTML textarea element\n  placeholder: PropTypes.string,\n  // same the onChange attribute of a HTML textarea element\n  onChange: PropTypes.func.isRequired,\n  // same the onBlur attribute of a HTML textarea element\n  onBlur: PropTypes.func,\n  // same the onBlur attribute of a HTML textarea element\n  onFocus: PropTypes.func,\n  // a function that will be invoked when Ctrl + Enter or Cmd + Enter or only Enter are pressed\n  onSubmit: PropTypes.func,\n};\n\nconst NoteTextarea = React.forwardRef((props, forwardedRef) => {\n  const [\n    userData,\n    canSubmitByEnter,\n  ] = useSelector(\n    (state) => [\n      selectors.getUserData(state),\n      selectors.isNoteSubmissionWithEnterEnabled(state),\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.getIsNoteEditing(state),\n    ],\n    shallowEqual,\n  );\n\n  const { resize } = useContext(NoteContext);\n  const textareaRef = useRef();\n  const prevHeightRef = useRef();\n\n  useLayoutEffect(() => {\n    // when the height of the textarea changes, we also want to call resize\n    // to clear the cell measurer cache and update the note height in the virtualized list\n    const boxDOMElement = textareaRef.current?.editor?.container.firstElementChild;\n    const boundingBox = boxDOMElement?.getBoundingClientRect() || {};\n    if (prevHeightRef.current && prevHeightRef.current !== boundingBox.height) {\n      resize();\n    }\n    prevHeightRef.current = boundingBox.height;\n    // we need value to be in the dependency array because the height will only change when value changes\n    // eslint-disable-next-line\n  }, [props.value, resize]);\n\n\n  const handleKeyDown = (e) => {\n    const enterKey = 13;\n    const enterKeyPressed = e.which === enterKey;\n    if (enterKeyPressed) {\n      const isSubmittingByEnter = canSubmitByEnter;\n      const isSubmittingByCtrlEnter = (e.metaKey || e.ctrlKey);\n\n      if (isSubmittingByEnter || isSubmittingByCtrlEnter) {\n        props.onSubmit(e);\n      }\n    }\n  };\n\n  const handleChange = (content, delta, source, editor) => {\n    if (textareaRef.current) {\n      /* For the React Quill editor, the text won't ever be empty, at least a '\\n'\n       * will be there, so it is necessary to trim the value to check if it is empty\n       */\n      const isEmpty = editor && editor.getText().trim() === '' && content === '<p><br></p>';\n      let value = '';\n\n      if (!isEmpty) {\n        value = content.target ? content.target.value : content;\n      }\n      props.onChange(value);\n\n      // If the delta contains a mention, then move the cursor to the end of the editor.\n      // This is necessary instead of using debounce when mentioning a user because\n      // the debounce was generating the following bug\n      // https://apryse.atlassian.net/browse/WVR-2380\n      const deltaContainsMention = mentionsManager.doesDeltaContainMention(delta.ops);\n\n      if (deltaContainsMention) {\n        const formattedText = mentionsManager.getFormattedTextFromDeltas(delta.ops);\n        const mentionData = mentionsManager.extractMentionDataFromStr(formattedText);\n        const editortextValue = editor.getText();\n        const totalTextLength = editortextValue.length + mentionData.plainTextValue.length;\n        const textareaEditor = textareaRef.current?.editor;\n        setTimeout(() => textareaEditor?.setSelection(totalTextLength, totalTextLength), 1);\n      }\n    }\n  };\n\n  const textareaProps = {\n    ...props,\n    ref: (el) => {\n      textareaRef.current = el;\n      forwardedRef(el);\n    },\n    onChange: throttle(handleChange, 100),\n    onKeyDown: handleKeyDown,\n    userData,\n  };\n\n  return (\n    <>\n      <CommentTextarea {...textareaProps}/>\n    </>\n  );\n});\n\nNoteTextarea.displayName = 'NoteTextarea';\nNoteTextarea.propTypes = propTypes;\n\nexport default NoteTextarea;\n","import NoteTextarea from './NoteTextarea';\n\nexport default NoteTextarea;","import i18next from 'i18next';\nimport core from 'core';\n\nfunction createStateAnnotation(annotation, state, documentViewerKey = 1) {\n  // TODO: the code below is copied from annotManager.updateAnnotationState in WebViewer to work around the issue\n  // in https://github.com/PDFTron/webviewer-ui/issues/620\n  // the implement before wasn't causing any actual issues, but it was confusing and unnecessary to trigger two annotationChanged events when a status is set\n  // A proper fix should be done once https://trello.com/c/zWlkygNb/1023-consider-adding-a-setlocalizationhandler-to-corecontrols is implemented\n  // at that time, we could use the translation handler(t) internally in updateAnnotationState before setting the contents, and use that function instead in this component\n\n  const stateAnnotation = new window.Core.Annotations.StickyAnnotation();\n\n  stateAnnotation['InReplyTo'] = annotation['Id'];\n  stateAnnotation['X'] = annotation['X'];\n  stateAnnotation['Y'] = annotation['Y'];\n  stateAnnotation['PageNumber'] = annotation['PageNumber'];\n  stateAnnotation['Subject'] = 'Sticky Note';\n  stateAnnotation['Author'] = core.getCurrentUser();\n  stateAnnotation['State'] = state;\n  stateAnnotation['StateModel'] = state === 'Marked' || state === 'Unmarked' ? 'Marked' : 'Review';\n  stateAnnotation['Hidden'] = true;\n  stateAnnotation.enableSkipAutoLink();\n\n  const displayAuthor = core.getDisplayAuthor(stateAnnotation['Author'], documentViewerKey);\n  const stateMessage = i18next.t(`option.state.${state.toLowerCase()}`);\n  const contents = `${stateMessage} ${i18next.t('option.state.setBy')} ${displayAuthor}`;\n  stateAnnotation.setContents(contents);\n\n  return stateAnnotation;\n}\n\nexport {\n  createStateAnnotation,\n};\n","import { useLayoutEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport PropTypes from 'prop-types';\nimport DataElements from 'src/constants/dataElement';\nimport actions from 'actions';\nimport selectors from 'selectors';\n\nconst createFlyoutItem = (option, icon, dataElement) => ({\n  icon,\n  label: `option.state.${option.toLowerCase()}`,\n  title: `option.state.${option.toLowerCase()}`,\n  option,\n  dataElement,\n});\n\nexport const noteStateFlyoutItems = [\n  createFlyoutItem('Accepted', 'icon-annotation-status-accepted', 'noteStateFlyoutAcceptedOption'),\n  createFlyoutItem('Rejected', 'icon-annotation-status-rejected', 'noteStateFlyoutRejectedOption'),\n  createFlyoutItem('Cancelled', 'icon-annotation-status-cancelled', 'noteStateFlyoutCancelledOption'),\n  createFlyoutItem('Completed', 'icon-annotation-status-completed', 'noteStateFlyoutCompletedOption'),\n  createFlyoutItem('None', 'icon-annotation-status-none', 'noteStateFlyoutNoneOption'),\n  createFlyoutItem('Marked', 'icon-annotation-status-marked', 'noteStateFlyoutMarkedOption'),\n  createFlyoutItem('Unmarked', 'icon-annotation-status-unmarked', 'noteStateFlyoutUnmarkedOption'),\n];\n\nconst NoteStateFlyout = (props) => {\n  const {\n    noteId,\n    handleStateChange = () => {},\n    isMultiSelectMode = false,\n  } = props;\n\n  const dispatch = useDispatch();\n\n  const selectorSuffix = isMultiSelectMode ? '' : `-${noteId}`;\n  const flyoutSelector = `${DataElements.NOTE_STATE_FLYOUT}${selectorSuffix}`;\n  const currentFlyout = useSelector((state) => selectors.getFlyout(state, flyoutSelector));\n\n  const handleClick = (noteState) => {\n    handleStateChange(noteState);\n  };\n\n  useLayoutEffect(() => {\n    const noteStateFlyout = {\n      dataElement: flyoutSelector,\n      className: 'NoteStateFlyout',\n      items: noteStateFlyoutItems.map((item) => {\n        return {\n          ...item,\n          onClick: () => handleClick(item.option),\n        };\n      }),\n    };\n\n    if (!currentFlyout) {\n      dispatch(actions.addFlyout(noteStateFlyout));\n    } else {\n      dispatch(actions.updateFlyout(noteStateFlyout.dataElement, noteStateFlyout));\n    }\n  }, [handleStateChange]);\n\n  return null;\n};\n\nNoteStateFlyout.propTypes = {\n  noteId: PropTypes.string,\n  handleStateChange: PropTypes.func,\n  isMultiSelectMode: PropTypes.bool,\n};\n\nexport default NoteStateFlyout;","import NoteStateFlyout from './NoteStateFlyout';\n\nexport default NoteStateFlyout;","var api = require(\"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../node_modules/css-loader/index.js!../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../node_modules/sass-loader/dist/cjs.js!./quill.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".ql-container{box-sizing:border-box;font-family:Helvetica,Arial,sans-serif;font-size:13px;height:100%;margin:0;position:relative}.ql-container.ql-disabled .ql-tooltip{visibility:hidden}.ql-container.ql-disabled .ql-editor ul[data-checked]>li:before{pointer-events:none}.ql-clipboard{left:-100000px;height:1px;overflow-y:hidden;position:absolute;top:50%}.ql-clipboard p{margin:0;padding:0}.ql-container .ql-editor{box-sizing:border-box;line-height:1.42;height:100%;outline:none;overflow-y:auto;padding:12px 15px;-o-tab-size:4;tab-size:4;-moz-tab-size:4;text-align:left;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;user-select:text}.ql-editor>*{cursor:text}.ql-editor blockquote,.ql-editor h1,.ql-editor h2,.ql-editor h3,.ql-editor h4,.ql-editor h5,.ql-editor h6,.ql-editor ol,.ql-editor p,.ql-editor pre,.ql-editor ul{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor p{margin:0;padding:0}.ql-editor ol,.ql-editor ul{padding-left:1.5em}.ql-editor ol>li,.ql-editor ul>li{list-style-type:none}.ql-editor ul>li:before{content:\\\"\\\\2022\\\"}.ql-editor ul[data-checked=false],.ql-editor ul[data-checked=true]{pointer-events:none}.ql-editor ul[data-checked=false]>li *,.ql-editor ul[data-checked=true]>li *{pointer-events:all}.ql-editor ul[data-checked=false]>li:before,.ql-editor ul[data-checked=true]>li:before{color:#777;cursor:pointer;pointer-events:all}.ql-editor ul[data-checked=true]>li:before{content:\\\"\\\\2611\\\"}.ql-editor ul[data-checked=false]>li:before{content:\\\"\\\\2610\\\"}.ql-editor li:before{display:inline-block;white-space:nowrap;width:1.2em}.ql-editor li:not(.ql-direction-rtl):before{margin-left:-1.5em;margin-right:.3em;text-align:right}.ql-editor li.ql-direction-rtl:before{margin-left:.3em;margin-right:-1.5em}.ql-editor ol li:not(.ql-direction-rtl),.ql-editor ul li:not(.ql-direction-rtl){padding-left:1.5em}.ql-editor ol li.ql-direction-rtl,.ql-editor ul li.ql-direction-rtl{padding-right:1.5em}.ql-editor ol li{counter-reset:list-1 list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9;counter-increment:list-0}.ql-editor ol li:before{content:counter(list-0,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-increment:list-1}.ql-editor ol li.ql-indent-1:before{content:counter(list-1,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-1{counter-reset:list-2 list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-2{counter-increment:list-2}.ql-editor ol li.ql-indent-2:before{content:counter(list-2,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-2{counter-reset:list-3 list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-3{counter-increment:list-3}.ql-editor ol li.ql-indent-3:before{content:counter(list-3,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-3{counter-reset:list-4 list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-4{counter-increment:list-4}.ql-editor ol li.ql-indent-4:before{content:counter(list-4,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-4{counter-reset:list-5 list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-5{counter-increment:list-5}.ql-editor ol li.ql-indent-5:before{content:counter(list-5,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-5{counter-reset:list-6 list-7 list-8 list-9}.ql-editor ol li.ql-indent-6{counter-increment:list-6}.ql-editor ol li.ql-indent-6:before{content:counter(list-6,decimal) \\\". \\\"}.ql-editor ol li.ql-indent-6{counter-reset:list-7 list-8 list-9}.ql-editor ol li.ql-indent-7{counter-increment:list-7}.ql-editor ol li.ql-indent-7:before{content:counter(list-7,lower-alpha) \\\". \\\"}.ql-editor ol li.ql-indent-7{counter-reset:list-8 list-9}.ql-editor ol li.ql-indent-8{counter-increment:list-8}.ql-editor ol li.ql-indent-8:before{content:counter(list-8,lower-roman) \\\". \\\"}.ql-editor ol li.ql-indent-8{counter-reset:list-9}.ql-editor ol li.ql-indent-9{counter-increment:list-9}.ql-editor ol li.ql-indent-9:before{content:counter(list-9,decimal) \\\". \\\"}.ql-editor .ql-indent-1:not(.ql-direction-rtl){padding-left:3em}.ql-editor li.ql-indent-1:not(.ql-direction-rtl){padding-left:4.5em}.ql-editor .ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:3em}.ql-editor li.ql-indent-1.ql-direction-rtl.ql-align-right{padding-right:4.5em}.ql-editor .ql-indent-2:not(.ql-direction-rtl){padding-left:6em}.ql-editor li.ql-indent-2:not(.ql-direction-rtl){padding-left:7.5em}.ql-editor .ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:6em}.ql-editor li.ql-indent-2.ql-direction-rtl.ql-align-right{padding-right:7.5em}.ql-editor .ql-indent-3:not(.ql-direction-rtl){padding-left:9em}.ql-editor li.ql-indent-3:not(.ql-direction-rtl){padding-left:10.5em}.ql-editor .ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:9em}.ql-editor li.ql-indent-3.ql-direction-rtl.ql-align-right{padding-right:10.5em}.ql-editor .ql-indent-4:not(.ql-direction-rtl){padding-left:12em}.ql-editor li.ql-indent-4:not(.ql-direction-rtl){padding-left:13.5em}.ql-editor .ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:12em}.ql-editor li.ql-indent-4.ql-direction-rtl.ql-align-right{padding-right:13.5em}.ql-editor .ql-indent-5:not(.ql-direction-rtl){padding-left:15em}.ql-editor li.ql-indent-5:not(.ql-direction-rtl){padding-left:16.5em}.ql-editor .ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:15em}.ql-editor li.ql-indent-5.ql-direction-rtl.ql-align-right{padding-right:16.5em}.ql-editor .ql-indent-6:not(.ql-direction-rtl){padding-left:18em}.ql-editor li.ql-indent-6:not(.ql-direction-rtl){padding-left:19.5em}.ql-editor .ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:18em}.ql-editor li.ql-indent-6.ql-direction-rtl.ql-align-right{padding-right:19.5em}.ql-editor .ql-indent-7:not(.ql-direction-rtl){padding-left:21em}.ql-editor li.ql-indent-7:not(.ql-direction-rtl){padding-left:22.5em}.ql-editor .ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:21em}.ql-editor li.ql-indent-7.ql-direction-rtl.ql-align-right{padding-right:22.5em}.ql-editor .ql-indent-8:not(.ql-direction-rtl){padding-left:24em}.ql-editor li.ql-indent-8:not(.ql-direction-rtl){padding-left:25.5em}.ql-editor .ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:24em}.ql-editor li.ql-indent-8.ql-direction-rtl.ql-align-right{padding-right:25.5em}.ql-editor .ql-indent-9:not(.ql-direction-rtl){padding-left:27em}.ql-editor li.ql-indent-9:not(.ql-direction-rtl){padding-left:28.5em}.ql-editor .ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:27em}.ql-editor li.ql-indent-9.ql-direction-rtl.ql-align-right{padding-right:28.5em}.ql-editor .ql-video{display:block;max-width:100%}.ql-editor .ql-video.ql-align-center{margin:0 auto}.ql-editor .ql-video.ql-align-right{margin:0 0 0 auto}.ql-editor .ql-bg-black{background-color:#000}.ql-editor .ql-bg-red{background-color:#e60000}.ql-editor .ql-bg-orange{background-color:#f90}.ql-editor .ql-bg-yellow{background-color:#ff0}.ql-editor .ql-bg-green{background-color:#008a00}.ql-editor .ql-bg-blue{background-color:#06c}.ql-editor .ql-bg-purple{background-color:#93f}.ql-editor .ql-color-white{color:#fff}.ql-editor .ql-color-red{color:#e60000}.ql-editor .ql-color-orange{color:#f90}.ql-editor .ql-color-yellow{color:#ff0}.ql-editor .ql-color-green{color:#008a00}.ql-editor .ql-color-blue{color:#06c}.ql-editor .ql-color-purple{color:#93f}.ql-editor .ql-font-serif{font-family:Georgia,Times New Roman,serif}.ql-editor .ql-font-monospace{font-family:Monaco,Courier New,monospace}.ql-editor .ql-size-small{font-size:.75em}.ql-editor .ql-size-large{font-size:1.5em}.ql-editor .ql-size-huge{font-size:2.5em}.ql-editor .ql-direction-rtl{direction:rtl;text-align:inherit}.ql-editor .ql-align-center{text-align:center}.ql-editor .ql-align-justify{text-align:justify}.ql-editor .ql-align-right{text-align:right}.ql-editor.ql-blank:before{color:rgba(0,0,0,.6);content:attr(data-placeholder);font-style:italic;left:15px;pointer-events:none;position:absolute;right:15px}.ql-snow.ql-toolbar:after,.ql-snow .ql-toolbar:after{clear:both;content:\\\"\\\";display:table}.ql-snow.ql-toolbar button,.ql-snow .ql-toolbar button{background:none;border:none;cursor:pointer;display:inline-block;float:left;height:24px;padding:3px 5px;width:28px}.ql-snow.ql-toolbar button svg,.ql-snow .ql-toolbar button svg{float:left;height:100%}.ql-snow.ql-toolbar button:active:hover,.ql-snow .ql-toolbar button:active:hover{outline:none}.ql-snow.ql-toolbar input.ql-image[type=file],.ql-snow .ql-toolbar input.ql-image[type=file]{display:none}.ql-snow.ql-toolbar .ql-picker-item.ql-selected,.ql-snow .ql-toolbar .ql-picker-item.ql-selected,.ql-snow.ql-toolbar .ql-picker-item:hover,.ql-snow .ql-toolbar .ql-picker-item:hover,.ql-snow.ql-toolbar .ql-picker-label.ql-active,.ql-snow .ql-toolbar .ql-picker-label.ql-active,.ql-snow.ql-toolbar .ql-picker-label:hover,.ql-snow .ql-toolbar .ql-picker-label:hover,.ql-snow.ql-toolbar button.ql-active,.ql-snow .ql-toolbar button.ql-active,.ql-snow.ql-toolbar button:focus,.ql-snow .ql-toolbar button:focus,.ql-snow.ql-toolbar button:hover,.ql-snow .ql-toolbar button:hover{color:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-fill,.ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:focus .ql-fill,.ql-snow .ql-toolbar button:focus .ql-fill,.ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,.ql-snow.ql-toolbar button:hover .ql-fill,.ql-snow .ql-toolbar button:hover .ql-fill,.ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill{fill:#06c}.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,.ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,.ql-snow.ql-toolbar button.ql-active .ql-stroke,.ql-snow .ql-toolbar button.ql-active .ql-stroke,.ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,.ql-snow.ql-toolbar button:focus .ql-stroke,.ql-snow .ql-toolbar button:focus .ql-stroke,.ql-snow.ql-toolbar button:focus .ql-stroke-miter,.ql-snow .ql-toolbar button:focus .ql-stroke-miter,.ql-snow.ql-toolbar button:hover .ql-stroke,.ql-snow .ql-toolbar button:hover .ql-stroke,.ql-snow.ql-toolbar button:hover .ql-stroke-miter,.ql-snow .ql-toolbar button:hover .ql-stroke-miter{stroke:#06c}@media(pointer:coarse){.ql-snow.ql-toolbar button:hover:not(.ql-active),.ql-snow .ql-toolbar button:hover:not(.ql-active){color:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill{fill:#444}.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,.ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,.ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter{stroke:#444}}.ql-snow,.ql-snow *{box-sizing:border-box}.ql-snow .ql-hidden{display:none}.ql-snow .ql-out-bottom,.ql-snow .ql-out-top{visibility:hidden}.ql-snow .ql-tooltip{position:absolute;transform:translateY(10px)}.ql-snow .ql-tooltip a{cursor:pointer;text-decoration:none}.ql-snow .ql-tooltip.ql-flip{transform:translateY(-10px)}.ql-snow .ql-formats{display:inline-block;vertical-align:middle}.ql-snow .ql-formats:after{clear:both;content:\\\"\\\";display:table}.ql-snow .ql-stroke{fill:none;stroke:#444;stroke-linecap:round;stroke-linejoin:round;stroke-width:2}.ql-snow .ql-stroke-miter{fill:none;stroke:#444;stroke-miterlimit:10;stroke-width:2}.ql-snow .ql-fill,.ql-snow .ql-stroke.ql-fill{fill:#444}.ql-snow .ql-empty{fill:none}.ql-snow .ql-even{fill-rule:evenodd}.ql-snow .ql-stroke.ql-thin,.ql-snow .ql-thin{stroke-width:1}.ql-snow .ql-transparent{opacity:.4}.ql-snow .ql-direction svg:last-child{display:none}.ql-snow .ql-direction.ql-active svg:last-child{display:inline}.ql-snow .ql-direction.ql-active svg:first-child{display:none}.ql-snow .ql-editor h1{font-size:2em}.ql-snow .ql-editor h2{font-size:1.5em}.ql-snow .ql-editor h3{font-size:1.17em}.ql-snow .ql-editor h4{font-size:1em}.ql-snow .ql-editor h5{font-size:.83em}.ql-snow .ql-editor h6{font-size:.67em}.ql-snow .ql-editor a{text-decoration:underline}.ql-snow .ql-editor blockquote{border-left:4px solid #ccc;margin-bottom:5px;margin-top:5px;padding-left:16px}.ql-snow .ql-editor code,.ql-snow .ql-editor pre{background-color:#f0f0f0;border-radius:3px}.ql-snow .ql-editor pre{white-space:pre-wrap;margin-bottom:5px;margin-top:5px;padding:5px 10px}.ql-snow .ql-editor code{font-size:85%;padding:2px 4px}.ql-snow .ql-editor pre.ql-syntax{background-color:#23241f;color:#f8f8f2;overflow:visible}.ql-snow .ql-editor img{max-width:100%}.ql-snow .ql-picker{color:#444;display:inline-block;float:left;font-size:14px;font-weight:500;height:24px;position:relative;vertical-align:middle}.ql-snow .ql-picker-label{cursor:pointer;display:inline-block;height:100%;padding-left:8px;padding-right:2px;position:relative;width:100%}.ql-snow .ql-picker-label:before{display:inline-block;line-height:22px}.ql-snow .ql-picker-options{background-color:#fff;display:none;min-width:100%;padding:4px 8px;position:absolute;white-space:nowrap}.ql-snow .ql-picker-options .ql-picker-item{cursor:pointer;display:block;padding-bottom:5px;padding-top:5px}.ql-snow .ql-picker.ql-expanded .ql-picker-label{color:#ccc;z-index:2}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill{fill:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke{stroke:#ccc}.ql-snow .ql-picker.ql-expanded .ql-picker-options{display:block;margin-top:-1px;top:100%;z-index:1}.ql-snow .ql-color-picker,.ql-snow .ql-icon-picker{width:28px}.ql-snow .ql-color-picker .ql-picker-label,.ql-snow .ql-icon-picker .ql-picker-label{padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-label svg,.ql-snow .ql-icon-picker .ql-picker-label svg{right:4px}.ql-snow .ql-icon-picker .ql-picker-options{padding:4px 0}.ql-snow .ql-icon-picker .ql-picker-item{height:24px;width:24px;padding:2px 4px}.ql-snow .ql-color-picker .ql-picker-options{padding:3px 5px;width:152px}.ql-snow .ql-color-picker .ql-picker-item{border:1px solid transparent;float:left;height:16px;margin:2px;padding:0;width:16px}.ql-snow .ql-picker:not(.ql-color-picker):not(.ql-icon-picker) svg{position:absolute;margin-top:-9px;right:0;top:50%;width:18px}.ql-snow .ql-picker.ql-font .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-item[data-label]:not([data-label=\\\"\\\"]):before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-label]:not([data-label=\\\"\\\"]):before{content:attr(data-label)}.ql-snow .ql-picker.ql-header{width:98px}.ql-snow .ql-picker.ql-header .ql-picker-item:before,.ql-snow .ql-picker.ql-header .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"1\\\"]:before{content:\\\"Heading 1\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"2\\\"]:before{content:\\\"Heading 2\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"3\\\"]:before{content:\\\"Heading 3\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"4\\\"]:before{content:\\\"Heading 4\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"5\\\"]:before{content:\\\"Heading 5\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before,.ql-snow .ql-picker.ql-header .ql-picker-label[data-value=\\\"6\\\"]:before{content:\\\"Heading 6\\\"}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"1\\\"]:before{font-size:2em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"2\\\"]:before{font-size:1.5em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"3\\\"]:before{font-size:1.17em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"4\\\"]:before{font-size:1em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"5\\\"]:before{font-size:.83em}.ql-snow .ql-picker.ql-header .ql-picker-item[data-value=\\\"6\\\"]:before{font-size:.67em}.ql-snow .ql-picker.ql-font{width:108px}.ql-snow .ql-picker.ql-font .ql-picker-item:before,.ql-snow .ql-picker.ql-font .ql-picker-label:before{content:\\\"Sans Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=serif]:before{content:\\\"Serif\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before,.ql-snow .ql-picker.ql-font .ql-picker-label[data-value=monospace]:before{content:\\\"Monospace\\\"}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=serif]:before{font-family:Georgia,Times New Roman,serif}.ql-snow .ql-picker.ql-font .ql-picker-item[data-value=monospace]:before{font-family:Monaco,Courier New,monospace}.ql-snow .ql-picker.ql-size{width:98px}.ql-snow .ql-picker.ql-size .ql-picker-item:before,.ql-snow .ql-picker.ql-size .ql-picker-label:before{content:\\\"Normal\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=small]:before{content:\\\"Small\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=large]:before{content:\\\"Large\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before,.ql-snow .ql-picker.ql-size .ql-picker-label[data-value=huge]:before{content:\\\"Huge\\\"}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=small]:before{font-size:10px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=large]:before{font-size:18px}.ql-snow .ql-picker.ql-size .ql-picker-item[data-value=huge]:before{font-size:32px}.ql-snow .ql-color-picker.ql-background .ql-picker-item{background-color:#fff}.ql-snow .ql-color-picker.ql-color .ql-picker-item{background-color:#000}.ql-toolbar.ql-snow{border:1px solid #ccc;box-sizing:border-box;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;padding:8px}.ql-toolbar.ql-snow .ql-formats{margin-right:15px}.ql-toolbar.ql-snow .ql-picker-label{border:1px solid transparent}.ql-toolbar.ql-snow .ql-picker-options{border:1px solid transparent;box-shadow:0 2px 8px rgba(0,0,0,.2)}.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label,.ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options{border-color:#ccc}.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item.ql-selected,.ql-toolbar.ql-snow .ql-color-picker .ql-picker-item:hover{border-color:#000}.ql-toolbar.ql-snow+.ql-container.ql-snow{border-top:0}.ql-snow .ql-tooltip{background-color:#fff;border:1px solid #ccc;box-shadow:0 0 5px #ddd;color:#444;padding:5px 12px;white-space:nowrap}.ql-snow .ql-tooltip:before{content:\\\"Visit URL:\\\";line-height:26px;margin-right:8px}.ql-snow .ql-tooltip input[type=text]{display:none;border:1px solid #ccc;font-size:13px;height:26px;margin:0;padding:3px 5px;width:170px}.ql-snow .ql-tooltip a.ql-preview{display:inline-block;max-width:200px;overflow-x:hidden;text-overflow:ellipsis;vertical-align:top}.ql-snow .ql-tooltip a.ql-action:after{border-right:1px solid #ccc;content:\\\"Edit\\\";margin-left:16px;padding-right:8px}.ql-snow .ql-tooltip a.ql-remove:before{content:\\\"Remove\\\";margin-left:8px}.ql-snow .ql-tooltip a{line-height:26px}.ql-snow .ql-tooltip.ql-editing a.ql-preview,.ql-snow .ql-tooltip.ql-editing a.ql-remove{display:none}.ql-snow .ql-tooltip.ql-editing input[type=text]{display:inline-block}.ql-snow .ql-tooltip.ql-editing a.ql-action:after{border-right:0;content:\\\"Save\\\";padding-right:0}.ql-snow .ql-tooltip[data-mode=link]:before{content:\\\"Enter link:\\\"}.ql-snow .ql-tooltip[data-mode=formula]:before{content:\\\"Enter formula:\\\"}.ql-snow .ql-tooltip[data-mode=video]:before{content:\\\"Enter video:\\\"}.ql-snow a{color:#06c}.ql-container.ql-snow{border:1px solid #ccc}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./CommentTextarea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.comment-textarea{position:relative}.comment-textarea .ql-toolbar{display:none}.comment-textarea .ql-container{border:none}.comment-textarea .ql-container .ql-editor{width:100%;padding:4px 6px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);resize:none;overflow:hidden;box-sizing:border-box}.comment-textarea .ql-container .ql-editor:focus{outline:none;border:1px solid var(--focus-border)}.comment-textarea .ql-container .ql-editor.ql-blank:before{left:8px;list-style-type:none;font-style:normal;color:var(--placeholder-text)}.comment-textarea .ql-container .ql-editor p{margin:0;word-break:break-word}.comment-textarea .ql-container .ql-editor ul>li:before{content:none!important}.comment-textarea .ql-container.ql-snow{border:none}.comment-textarea .add-attachment{position:absolute;bottom:2px;right:2px;width:24px;height:24px}.comment-textarea .add-attachment:hover{background-color:var(--blue-1)}.comment-textarea .add-attachment .Icon{padding:3px}.ql-editor ul>li:before{content:none!important}.mention__element{width:170px;z-index:9001!important;max-height:200px;overflow-y:auto;overflow-y:overlay;overflow-x:hidden;background-color:var(--component-background);border:1px solid var(--border);border-radius:4px}.mention__suggestions__list{width:100%;font-size:14px;margin-top:0;padding-left:0!important;list-style:none;word-wrap:break-word;border-radius:4px}.mention__suggestions__item{background-color:var(--component-background);white-space:nowrap;padding-left:0;text-overflow:clip;padding:7px 5px 1px!important;margin:0;width:100%;cursor:pointer}.mention__suggestions__item .email{margin-top:2px;font-size:12px;white-space:normal;color:var(--faded-text)}.mention__suggestions__item.selected{background-color:var(--view-header-button-active)!important}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NotePopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NotePopup .options.modular-ui .option:hover{cursor:pointer;background:var(--primary-button-hover);color:var(--gray-0)}.NotePopup{flex-grow:0;display:flex;justify-content:flex-end;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:28px;height:28px;position:relative}.NotePopup .Button.overflow{width:28px;height:28px;border-radius:4px;display:flex;justify-content:center;align-items:center}.NotePopup .Button.overflow .Icon{width:24px;height:24px}.NotePopup .Button.overflow:hover{background:var(--blue-1)}.NotePopup .Button.overflow.active{background:var(--popup-button-active)}.NotePopup .options{display:flex;flex-direction:column;box-shadow:0 0 3px 0 var(--box-shadow);z-index:80;position:absolute;border-radius:4px;background:var(--component-background);top:40px;width:-moz-max-content;width:max-content}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NotePopup .options{right:0}}.NotePopup .options .note-popup-option{padding:0;border:none;background-color:transparent;align-items:flex-start}:host(:not([data-tabbing=true])) .NotePopup .options .note-popup-option,html:not([data-tabbing=true]) .NotePopup .options .note-popup-option{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NotePopup .options .note-popup-option{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NotePopup .options .note-popup-option{font-size:13px}}.NotePopup .options.options-reply{top:30px}.NotePopup .options .option{display:flex;flex-direction:column;justify-content:center;height:28px;padding-left:8px;padding-right:17px;border-radius:0}.NotePopup .options .option:hover{background-color:var(--popup-button-hover)}.NotePopup .options .option:first-child{border-top-right-radius:4px;border-top-left-radius:4px}.NotePopup .options .option:last-child{border-bottom-right-radius:4px}.NotePopup .Button{height:28px}.NotePopup .Button.active{background:var(--popup-button-active)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NotePopup .Button.note-popup-toggle-trigger{width:28px;height:28px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NotePopup .Button.note-popup-toggle-trigger{width:28px;height:28px}}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteHeader.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteHeader{padding-right:12px;position:relative;flex:1;color:var(--text-color);display:flex}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteHeader{flex:none}}.NoteHeader .type-icon{margin:2px;width:24px;height:24px}.NoteHeader .type-icon-container{padding-right:13px}.NoteHeader .type-icon-container .unread-notification{position:absolute;width:13px;height:13px;right:-2px;top:-2px;border-radius:10000px;border:2px solid var(--component-background);background:#00a5e4}.NoteHeader .author-and-date{flex:1;min-width:0;position:relative}.NoteHeader .author-and-date.isReply{padding-left:0;padding-top:0;font-size:10px}.NoteHeader .author-and-date .author-and-overflow{display:flex;justify-content:space-between}.NoteHeader .author-and-date .author-and-overflow .author-and-time{display:flex;flex-direction:column;word-break:break-word}.NoteHeader .author-and-date .author-and-overflow .author-and-time .author{font-weight:700;font-size:13px}.NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies{display:flex}.NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .date-and-time{font-size:10px;color:var(--faded-text)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .date-and-time{font-size:10px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .date-and-time{font-size:10px}}.NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .num-replies-container{display:flex;flex-grow:1;padding-left:10px}.NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .num-replies-container .num-reply-icon{height:12px;width:12px}.NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .num-replies-container .num-replies{font-size:10px;color:var(--gray-7)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteHeader .author-and-date .author-and-overflow .author-and-time .date-and-num-replies .num-replies-container .num-replies{font-size:12px}}.NoteHeader .author-and-date .author-and-overflow .state-and-overflow{display:flex;flex:1;justify-content:flex-end}.NoteHeader .author-and-date .author-and-overflow .state-and-overflow .tracked-change-icon-wrapper{cursor:pointer;border-radius:4px}.NoteHeader .author-and-date .author-and-overflow .state-and-overflow .tracked-change-icon-wrapper .tracked-change-icon{margin:2px;width:24px;height:24px}.NoteHeader .author-and-date .author-and-overflow .state-and-overflow .tracked-change-icon-wrapper:hover.accept{background-color:#d5f5ca}.NoteHeader .author-and-date .author-and-overflow .state-and-overflow .tracked-change-icon-wrapper:hover.reject{background-color:#ffe8e8}.NoteHeader .author-and-date .author-and-overflow .state-and-overflow .ToggleElementButton button{width:28px;height:28px;margin:0 8px 0 13px}.NoteHeader .author-and-date .author-and-overflow .state-and-overflow .ToggleElementButton button .Icon{width:20px;height:20px}.NoteHeader .author-name{font-weight:700}.parent{padding-left:12px;padding-top:12px}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyAttachmentList.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".reply-attachment-list{display:flex;flex-direction:column;cursor:default}.reply-attachment-list .reply-attachment{display:flex;flex-direction:column;background-color:var(--gray-1);border-radius:4px;cursor:pointer;overflow:hidden}.reply-attachment-list .reply-attachment:not(:last-child){margin-bottom:8px}.reply-attachment-list .reply-attachment .reply-attachment-preview{width:100%;max-height:80px;display:flex;justify-content:center}.reply-attachment-list .reply-attachment .reply-attachment-preview.dirty{position:relative;margin-bottom:15px}.reply-attachment-list .reply-attachment .reply-attachment-preview img{max-width:100%;max-height:100%;-o-object-fit:contain;object-fit:contain}.reply-attachment-list .reply-attachment .reply-attachment-preview .reply-attachment-preview-message{font-size:11px;color:var(--error-text-color);position:absolute;bottom:-15px;left:10px}.reply-attachment-list .reply-attachment .reply-attachment-info{display:flex;align-items:center;height:40px;padding:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-attachment-icon{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .reply-file-name{height:16px;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-left:8px;margin-right:8px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button{height:24px;min-height:24px;width:24px;min-width:24px}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button:hover{background-color:var(--blue-1)}.reply-attachment-list .reply-attachment .reply-attachment-info .attachment-button .Icon{height:16px;width:16px}\", \"\"]);\n\n// exports\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./NoteContent.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.NoteContent.modular-ui .edit-content .edit-buttons .save-button.disabled{cursor:default;background:var(--disabled-button-color);color:var(--primary-button-text)}.NoteContent.modular-ui .edit-content .edit-buttons .save-button.disabled span{color:var(--primary-button-text)}.NoteContent{--note-content-right-padding-width:12px;position:relative;display:flex;flex-direction:column;align-items:left;flex:1;color:var(--text-color);padding-bottom:12px}.NoteContent.isReply{padding-bottom:0}.NoteContent.unread.isReply{background:rgba(0,165,228,.08)}.NoteContent.unread.clicked .author-and-time span{font-weight:400}.NoteContent.unread .author-and-time span{font-weight:700}.NoteContent .container{padding-left:52px;padding-right:var(--note-content-right-padding-width)}.NoteContent .container,.NoteContent .container-reply{margin-top:8px;overflow:hidden;white-space:pre-wrap;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;user-select:text;cursor:text}.NoteContent .edit-content{margin-top:7px;display:flex;flex-direction:column;position:relative;flex:1;padding-left:52px;padding-right:12px;padding-bottom:12px}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.NoteContent .edit-content{flex:none}}.NoteContent .edit-content textarea{width:100%;padding-left:8px;border:1px solid var(--border);border-radius:4px;color:var(--text-color);padding-top:4px;padding-bottom:4px;resize:none;overflow:hidden;box-sizing:border-box}.NoteContent .edit-content textarea:focus{outline:none;border:1px solid var(--focus-border)}.NoteContent .edit-content textarea::-moz-placeholder{color:var(--placeholder-text)}.NoteContent .edit-content textarea::placeholder{color:var(--placeholder-text)}.NoteContent .edit-content .edit-buttons{display:flex;flex-direction:row;justify-content:flex-end;margin-top:8px}.NoteContent .edit-content .edit-buttons>div{margin-right:4px}.NoteContent .edit-content .edit-buttons .save-button{background-color:transparent;cursor:pointer;flex-shrink:0;background:var(--primary-button);border-radius:4px;width:-moz-fit-content;width:fit-content;border:none;height:28px;display:flex;align-items:center;justify-content:center;position:relative;color:var(--primary-button-text);padding:0 13px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .save-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .save-button{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteContent .edit-content .edit-buttons .save-button{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteContent .edit-content .edit-buttons .save-button{font-size:13px}}.NoteContent .edit-content .edit-buttons .save-button:hover{background:var(--primary-button-hover);color:var(--primary-button-text)}.NoteContent .edit-content .edit-buttons .save-button.disabled{background:var(--gray-6)!important;border-color:var(--gray-6)!important;cursor:not-allowed}.NoteContent .edit-content .edit-buttons .save-button.disabled span{color:var(--primary-button-text)}.NoteContent .edit-content .edit-buttons .cancel-button{border:none;background-color:transparent;color:var(--secondary-button-text);padding:0 10px;width:-moz-fit-content;width:fit-content;height:28px;display:flex;align-items:center;justify-content:center;cursor:pointer;margin-right:2px}:host(:not([data-tabbing=true])) .NoteContent .edit-content .edit-buttons .cancel-button,html:not([data-tabbing=true]) .NoteContent .edit-content .edit-buttons .cancel-button{outline:none}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .NoteContent .edit-content .edit-buttons .cancel-button{font-size:13px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .NoteContent .edit-content .edit-buttons .cancel-button{font-size:13px}}.NoteContent .edit-content .edit-buttons .cancel-button:hover{color:var(--secondary-button-hover)}.NoteContent .reply-content{padding-left:0}.NoteContent .contents{white-space:pre-wrap;color:var(--text-color);margin-right:5px;padding:0;word-break:normal;word-wrap:break-word;-webkit-user-select:text;-moz-user-select:text;user-select:text}.NoteContent .contents .highlight{background:#fffc95;color:#333}.NoteContent .highlight{background:#fffc95}.NoteContent .selected-text-preview{padding-left:52px;padding-top:8px}.NoteContent .reply-attachment-list{margin-bottom:8px}.NoteContent.modular-ui .highlight{font-weight:700;color:var(--blue-5);background:none}.NoteContent.modular-ui .edit-content .edit-buttons .save-button.disabled{border:none}.NoteContent a{color:var(--blue-5)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../../node_modules/css-loader/index.js!../../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../../node_modules/sass-loader/dist/cjs.js!./ReplyArea.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.reply-area-container{border-top:1px solid var(--divider);display:flex;flex-direction:column;margin-bottom:0}.reply-area-container .reply-attachment-list{margin:12px 12px 0}.reply-area-container .reply-area-with-button{display:flex}.reply-area-container .reply-area-with-button .reply-area{position:relative;flex:1;margin:12px 17px 12px 12px;border-radius:4px;align-items:center}.reply-area-container .reply-area-with-button .reply-area.unread{background:rgba(0,165,228,.08)}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank{padding:4px}.reply-area-container .reply-area-with-button .reply-area .comment-textarea .ql-container .ql-editor.ql-blank:before{left:4px}.reply-area-container .reply-area-with-button .reply-button-container{display:flex;flex-direction:column;justify-content:flex-end}.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:28px;height:28px;padding:0;border:none;background-color:transparent;right:10px;bottom:12px}:host(:not([data-tabbing=true])) .reply-area-container .reply-area-with-button .reply-button-container .reply-button,html:not([data-tabbing=true]) .reply-area-container .reply-area-with-button .reply-button-container .reply-button{outline:none}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.reply-area-container .reply-area-with-button .reply-button-container .reply-button{width:80px}}.reply-area-container .reply-area-with-button .reply-button-container .reply-button:hover{background:var(--blue-1)}.reply-area-container .reply-area-with-button .reply-button-container .reply-button.disabled{cursor:not-allowed}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./AnnotationNoteConnectorLine.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}@media print{#line-connector-root{opacity:0}}#line-connector-root{position:relative;z-index:69}.horizontalLine{height:2px}.horizontalLine,.verticalLine{background-color:rgba(30,120,235,.5);position:fixed}.verticalLine{width:2px}.arrowHead{position:absolute;top:0;left:0;margin:auto;width:0;height:0;border-top:6px solid transparent;border-bottom:6px solid transparent;border-right:7px solid rgba(30,120,235,.5);transform:translateX(-100%) translateY(-50%) translateY(1px)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./Note.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \":host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.Note{padding:0;border:none;background-color:transparent;display:block;text-align:left;border-radius:4px;box-shadow:0 0 3px 0 var(--note-box-shadow);margin-bottom:8px;margin-left:2px;background:var(--component-background);cursor:pointer}:host(:not([data-tabbing=true])) .Note,html:not([data-tabbing=true]) .Note{outline:none}.Note.unread{border:1.2px solid #00a5e4}.Note.expanded{box-shadow:0 4px 16px var(--note-box-shadow-expanded),0 0 4px 0 var(--note-box-shadow)}.Note.is-multi-selected{box-shadow:0 4px 16px rgba(134,142,150,.24),0 0 4px 0 var(--note-box-shadow)}.Note.disabled{opacity:.5;pointer-events:none}.Note .mark-all-read-button{background:#00a5e4;text-align:center;color:#fff;height:16px;font-size:12px;width:100%;border-radius:0}.Note .divider{height:1px;width:100%;background:var(--divider)}.Note .reply-divider{background:var(--reply-divider);height:1px;width:100%}.Note .replies{margin-left:52px;padding-bottom:12px}.Note .reply{padding-left:12px;padding-bottom:24px;border-left:1px solid var(--reply-divider)}.Note .reply:last-of-type{padding-bottom:0}.Note .group-section{margin-left:52px;padding-bottom:12px;display:flex;flex-direction:column;grid-row-gap:4px;row-gap:4px;padding-right:12px}.Note .group-section.modular-ui .group-child:hover{border:none;box-shadow:inset 0 0 0 1px var(--blue-6);background:var(--faded-component-background);border-radius:4px}.Note .text-button{color:var(--secondary-button-text);display:flex}.Note .text-button .Icon{color:var(--secondary-button-text);height:18px;width:18px}.Note .group-child{padding-top:4px;padding-bottom:4px}.Note .group-child:hover{background:var(--view-header-button-hover)}.Note .group-child .NoteContent{padding-bottom:0}.Note:focus{outline:none}.Note.focus-visible,.Note:focus-visible{outline:var(--focus-visible-outline)}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nconst ReplyAttachmentPicker = ({ annotationId, addAttachments }) => {\n  const replyAttachmentHandler = useSelector((state) => selectors.getReplyAttachmentHandler(state));\n\n  const onChange = async (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      let attachment = file;\n      if (replyAttachmentHandler) {\n        const url = await replyAttachmentHandler(file);\n        attachment = {\n          url,\n          name: file.name,\n          size: file.size,\n          type: file.type\n        };\n      }\n      addAttachments(annotationId, [attachment]);\n    }\n  };\n\n  return (\n    <input\n      id=\"reply-attachment-picker\"\n      type=\"file\"\n      style={{ display: 'none' }}\n      onChange={onChange}\n      onClick={(e) => {\n        e.target.value = '';\n      }}\n    />\n  );\n};\n\nexport default ReplyAttachmentPicker;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport DataElementWrapper from 'components/DataElementWrapper';\nimport { useTranslation } from 'react-i18next';\nimport classNames from 'classnames';\nimport selectors from 'selectors';\n\nimport './NotePopup.scss';\nimport Button from '../Button';\nimport { useSelector } from 'react-redux';\n\nconst propTypes = {\n  handleEdit: PropTypes.func,\n  handleDelete: PropTypes.func,\n  closePopup: PropTypes.func,\n  openPopup: PropTypes.func,\n  isEditable: PropTypes.bool,\n  isDeletable: PropTypes.bool,\n  isOpen: PropTypes.bool,\n};\n\nfunction noop() { }\n\nfunction NotePopup(props) {\n  const {\n    handleEdit = noop,\n    handleDelete = noop,\n    closePopup = noop,\n    openPopup = noop,\n    isEditable,\n    isDeletable,\n    isOpen,\n    isReply,\n  } = props;\n\n  const [t] = useTranslation();\n  const popupRef = React.useRef();\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n\n  useOnClickOutside(popupRef, () => {\n    closePopup();\n  });\n\n  const togglePopup = (e) => {\n    e.stopPropagation();\n    if (isOpen) {\n      closePopup();\n    } else {\n      openPopup();\n    }\n  };\n\n  function onEditButtonClick(e) {\n    e.stopPropagation();\n    closePopup();\n    handleEdit();\n  }\n\n  function onDeleteButtonClick() {\n    closePopup();\n    handleDelete();\n  }\n\n  if (!isEditable && !isDeletable) {\n    return null;\n  }\n\n  const notePopupButtonClass = classNames('overflow note-popup-toggle-trigger', { active: isOpen });\n  const optionsClass = classNames('options note-popup-options', { 'options-reply': isReply, 'modular-ui': customizableUI });\n  return (\n    <DataElementWrapper\n      className=\"NotePopup\"\n      dataElement=\"notePopup\"\n      ref={popupRef}\n    >\n      <Button\n        dataElement=\"notePopupButtonClass\"\n        className={notePopupButtonClass}\n        onClick={togglePopup}\n        img=\"icon-tools-more\"\n        isActive={isOpen}\n      />\n      {isOpen && (\n        <div className={optionsClass}>\n          {isEditable && (\n            <DataElementWrapper\n              type=\"button\"\n              className=\"option note-popup-option\"\n              dataElement=\"notePopupEdit\"\n              onClick={onEditButtonClick}\n            >\n              {t('action.edit')}\n            </DataElementWrapper>\n          )}\n          {isDeletable && (\n            <DataElementWrapper\n              type=\"button\"\n              className=\"option note-popup-option\"\n              dataElement=\"notePopupDelete\"\n              onClick={onDeleteButtonClick}\n            >\n              {t('action.delete')}\n            </DataElementWrapper>\n          )}\n        </div>\n      )}\n    </DataElementWrapper>\n  );\n}\n\nNotePopup.propTypes = propTypes;\n\nexport default NotePopup;\n","import React from 'react';\nimport core from 'core';\nimport NotePopup from './NotePopup';\nimport Tooltip from 'components/Tooltip';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\n\nfunction NotePopupContainer(props) {\n  const [\n    activeDocumentViewerKey,\n  ] = useSelector((state) => [\n    selectors.getActiveDocumentViewerKey(state),\n  ]);\n  const { annotation, setIsEditing, noteIndex } = props;\n\n  const [canModify, setCanModify] = React.useState(core.canModify(annotation));\n  const [canModifyContents, setCanModifyContents] = React.useState(core.canModifyContents(annotation));\n  const [isOpen, setIsOpen] = React.useState(false);\n  const [t] = useTranslation();\n\n  React.useEffect(() => {\n    function onUpdateAnnotationPermission() {\n      setCanModify(core.canModify(annotation, activeDocumentViewerKey));\n      setCanModifyContents(core.canModifyContents(annotation, activeDocumentViewerKey));\n    }\n\n    onUpdateAnnotationPermission();\n    core.addEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, undefined, activeDocumentViewerKey);\n    return () => core.removeEventListener('updateAnnotationPermission', onUpdateAnnotationPermission, activeDocumentViewerKey);\n  }, [annotation, activeDocumentViewerKey]);\n\n  const handleEdit = React.useCallback(() => {\n    const isFreeText = annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n    if (isFreeText && core.getAnnotationManager(activeDocumentViewerKey).isFreeTextEditingEnabled()) {\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationDoubleClicked', annotation);\n    } else {\n      setIsEditing(true, noteIndex);\n    }\n  }, [annotation, setIsEditing, noteIndex]);\n\n  const handleDelete = React.useCallback(() => {\n    core.deleteAnnotations([annotation, ...annotation.getGroupedChildren()], undefined, activeDocumentViewerKey);\n  }, [annotation]);\n\n  const openPopup = () => setIsOpen(true);\n  const closePopup = () => setIsOpen(false);\n\n  const isEditable = canModifyContents;\n  const isDeletable = canModify && !annotation?.NoDelete;\n\n  const passProps = {\n    handleEdit,\n    handleDelete,\n    isEditable,\n    isDeletable,\n    isOpen,\n    closePopup,\n    openPopup,\n  };\n\n  // We wrap the element in a div so the tooltip works properly\n  return (\n    <Tooltip content={t('formField.formFieldPopup.options')}>\n      <div>\n        <NotePopup {...props} {...passProps} />\n      </div>\n    </Tooltip>\n  );\n}\n\nexport default NotePopupContainer;\n","import NotePopupContainer from './NotePopupContainer';\n\nexport default NotePopupContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\nimport NoteStateFlyout from 'components/ModularComponents/NoteStateFlyout';\nimport ToggleElementButton from 'components/ModularComponents/ToggleElementButton';\nimport DataElements from 'constants/dataElement';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  handleStateChange: PropTypes.func\n};\n\nfunction NoteState(props) {\n  const {\n    annotation,\n    handleStateChange = () => { },\n  } = props;\n\n  const [t] = useTranslation();\n\n  const annotationState = annotation.getStatus();\n  const icon = `icon-annotation-status-${annotationState === '' ? 'none' : annotationState.toLowerCase()}`;\n  const id = annotation.Id;\n\n  return (\n    <>\n      <ToggleElementButton\n        dataElement={`noteState-${id}`}\n        title={t('option.notesOrder.status')}\n        img={icon}\n        toggleElement={`${DataElements.NOTE_STATE_FLYOUT}-${id}`}\n      />\n      <NoteStateFlyout\n        noteId={id}\n        handleStateChange={handleStateChange}\n      />\n    </>\n  );\n}\n\nNoteState.propTypes = propTypes;\n\nexport default NoteState;\n","import React, { useCallback } from 'react';\nimport PropTypes from 'prop-types';\nimport core from 'core';\n\nimport NoteState from './NoteState';\nimport { createStateAnnotation } from 'helpers/NoteStateUtils';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport useFocusOnClose from 'hooks/useFocusOnClose';\n\nconst propTypes = {\n  annotation: PropTypes.object,\n};\n\nfunction NoteStateContainer(props) {\n  const activeDocumentViewerKey = useSelector((state) => selectors.getActiveDocumentViewerKey(state));\n  const isNoteStateDisabled = useSelector((state) => selectors.isElementDisabled(state, 'noteState'));\n\n  const { annotation } = props;\n\n  const handleStateChange = useFocusOnClose(useCallback(function handleStateChangeCallback(newValue) {\n    const stateAnnotation = createStateAnnotation(annotation, newValue, activeDocumentViewerKey);\n    annotation.addReply(stateAnnotation);\n    const annotationManager = core.getAnnotationManager(activeDocumentViewerKey);\n    annotationManager.addAnnotation(stateAnnotation);\n    annotationManager.trigger('addReply', [stateAnnotation, annotation, annotationManager.getRootAnnotation(annotation)]);\n  }, [annotation, activeDocumentViewerKey]));\n\n  return (!isNoteStateDisabled &&\n    <div>\n      <NoteState handleStateChange={handleStateChange} {...props} />\n    </div>\n  );\n}\n\nNoteStateContainer.propTypes = propTypes;\nexport default NoteStateContainer;\n","import NoteStateContainer from './NoteStateContainer';\n\nexport default NoteStateContainer;\n","import React, { useState, useEffect } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport Tooltip from 'components/Tooltip';\nimport Icon from 'components/Icon';\n\nconst NoteUnpostedCommentIndicator = ({ annotationId, pendingEditTextMap, pendingReplyMap, pendingAttachmentMap }) => {\n  const { t } = useTranslation();\n  const [hasUnpostedComment, setHasUnpostedComment] = useState(false);\n  const [hasUnpostedReply, setHasUnpostedReply] = useState(false);\n  const [hasUnpostedAttachment, setHasUnpostedAttachment] = useState(false);\n\n  useEffect(() => {\n    setHasUnpostedComment(pendingEditTextMap[annotationId]?.length > 0);\n    setHasUnpostedReply(pendingReplyMap[annotationId]?.length > 0);\n    setHasUnpostedAttachment(pendingAttachmentMap[annotationId]?.length > 0);\n  }, [pendingEditTextMap, pendingReplyMap, pendingAttachmentMap]);\n\n  return (\n    (hasUnpostedComment || hasUnpostedReply || hasUnpostedAttachment) ?\n      <div data-element=\"unpostedCommentIndicator\">\n        <Tooltip content={t('message.unpostedComment')}>\n          <div>\n            <Icon className=\"type-icon\" glyph={'icon-unposted-comment'} />\n          </div>\n        </Tooltip>\n      </div> :\n      null\n  );\n};\n\nexport default NoteUnpostedCommentIndicator;\n","import NoteUnpostedCommentIndicatorContainer from './NoteUnpostedCommentIndicatorContainer';\n\nexport default NoteUnpostedCommentIndicatorContainer;","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteContext from 'components/Note/Context';\nimport NoteUnpostedCommentIndicator from './NoteUnpostedCommentIndicator';\n\nconst NoteUnpostedCommentIndicatorContainer = ({ annotationId }) => {\n  const isDisabled = useSelector((state) => selectors.isElementDisabled(state, 'unpostedCommentIndicator'));\n  const { pendingEditTextMap, pendingReplyMap, pendingAttachmentMap } = React.useContext(NoteContext);\n\n  if (isDisabled) {\n    return null;\n  }\n  return (\n    <NoteUnpostedCommentIndicator\n      annotationId={annotationId}\n      pendingEditTextMap={pendingEditTextMap}\n      pendingReplyMap={pendingReplyMap}\n      pendingAttachmentMap={pendingAttachmentMap}\n    />);\n};\n\nexport default NoteUnpostedCommentIndicatorContainer;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NotePopup from 'components/NotePopup';\nimport NoteState from 'components/NoteState';\nimport Icon from 'components/Icon';\nimport NoteUnpostedCommentIndicator from 'components/NoteUnpostedCommentIndicator';\nimport Choice from 'components/Choice';\nimport Tooltip from 'components/Tooltip';\n\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport getColor from 'helpers/getColor';\nimport { isDarkColorHex, isLightColorHex } from 'helpers/color';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport core from 'core';\nimport { NotesPanelSortStrategy } from 'constants/sortStrategies';\nimport Theme from 'constants/theme';\nimport { OFFICE_EDITOR_TRACKED_CHANGE_KEY } from 'constants/officeEditor';\nimport { COMMON_COLORS } from 'constants/commonColors';\n\nimport './NoteHeader.scss';\n\nconst propTypes = {\n  icon: PropTypes.string,\n  iconColor: PropTypes.string,\n  color: PropTypes.string,\n  fillColor: PropTypes.string,\n  annotation: PropTypes.object,\n  language: PropTypes.string,\n  noteDateFormat: PropTypes.string,\n  isSelected: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  notesShowLastUpdatedDate: PropTypes.bool,\n  isUnread: PropTypes.bool,\n  renderAuthorName: PropTypes.func,\n  isNoteStateDisabled: PropTypes.bool,\n  isEditing: PropTypes.bool,\n  noteIndex: PropTypes.number,\n  sortStrategy: PropTypes.string,\n  activeTheme: PropTypes.string,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n  showAnnotationNumbering: PropTypes.bool,\n  isTrackedChange: PropTypes.bool,\n};\n\nfunction NoteHeader(props) {\n  const {\n    icon,\n    iconColor,\n    annotation,\n    language,\n    noteDateFormat,\n    isSelected,\n    setIsEditing,\n    notesShowLastUpdatedDate,\n    isReply,\n    isUnread,\n    renderAuthorName,\n    isNoteStateDisabled,\n    isEditing,\n    noteIndex,\n    sortStrategy,\n    activeTheme,\n    isMultiSelected,\n    isMultiSelectMode,\n    handleMultiSelect,\n    isGroupMember,\n    showAnnotationNumbering,\n    timezone,\n    isTrackedChange,\n  } = props;\n\n  const [t] = useTranslation();\n\n  let date;\n  const dateCreated = (sortStrategy === NotesPanelSortStrategy.MODIFIED_DATE || (notesShowLastUpdatedDate && sortStrategy !== NotesPanelSortStrategy.CREATED_DATE)) ? getLatestActivityDate(annotation) : annotation.DateCreated;\n  if (timezone && dateCreated) {\n    const datetimeStr = dateCreated.toLocaleString('en-US', { timeZone: timezone });\n    date = new Date(datetimeStr);\n  } else {\n    date = dateCreated;\n  }\n\n  const numberOfReplies = annotation.getReplies().length;\n  let color = annotation[iconColor]?.toHexString?.();\n\n  if (activeTheme === Theme.DARK && color && isDarkColorHex(color)) {\n    color = COMMON_COLORS['white'];\n  } else if (activeTheme === Theme.LIGHT && color && isLightColorHex(color)) {\n    color = COMMON_COLORS['black'];\n  }\n\n  const fillColor = getColor(annotation.FillColor);\n  const annotationAssociatedNumber = annotation.getAssociatedNumber();\n  const annotationDisplayedAssociatedNumber = `#${annotationAssociatedNumber} - `;\n\n  const authorAndDateClass = classNames('author-and-date', { isReply });\n  const noteHeaderClass = classNames('NoteHeader', { parent: !isReply && !isGroupMember });\n\n  const acceptTrackedChange = (trackedChangeAnnot) => {\n    const trackedChangeId = trackedChangeAnnot.getCustomData(OFFICE_EDITOR_TRACKED_CHANGE_KEY);\n    core.getOfficeEditor().acceptTrackedChange(trackedChangeId);\n  };\n  const rejectTrackedChange = (trackedChangeAnnot) => {\n    const trackedChangeId = trackedChangeAnnot.getCustomData(OFFICE_EDITOR_TRACKED_CHANGE_KEY);\n    core.getOfficeEditor().rejectTrackedChange(trackedChangeId);\n  };\n\n  return (\n    <div className={noteHeaderClass}>\n      {!isReply &&\n        <div className=\"type-icon-container\">\n          {isUnread &&\n            <div className=\"unread-notification\"></div>\n          }\n          <Icon className=\"type-icon\" glyph={icon} color={color} fillColor={fillColor} />\n        </div>\n      }\n      <div className={authorAndDateClass}>\n        <div className=\"author-and-overflow\">\n          <div className=\"author-and-time\">\n            <div className=\"author\">\n              {showAnnotationNumbering && annotationAssociatedNumber !== undefined &&\n                <span className=\"annotation-number\">{annotationDisplayedAssociatedNumber}</span>\n              }\n              {renderAuthorName(annotation)}\n            </div>\n            <div className=\"date-and-num-replies\">\n              <div className=\"date-and-time\">\n                {date ? dayjs(date).locale(language).format(noteDateFormat) : t('option.notesPanel.noteContent.noDate')}\n                {isGroupMember && ` (Page ${annotation.PageNumber})`}\n              </div>\n              {numberOfReplies > 0 && !isSelected &&\n                <div className=\"num-replies-container\">\n                  <Icon className=\"num-reply-icon\" glyph='icon-chat-bubble' />\n                  <div className=\"num-replies\">{numberOfReplies}</div>\n                </div>}\n            </div>\n          </div>\n          <div className=\"state-and-overflow\">\n            {isMultiSelectMode && !isGroupMember && !isReply &&\n              <Choice\n                id={`note-multi-select-toggle_${annotation.Id}`}\n                aria-label={`${renderAuthorName(annotation)} ${t('option.notesPanel.toggleMultiSelect')}`}\n                checked={isMultiSelected}\n                onClick={(e) => {\n                  e.preventDefault();\n                  e.stopPropagation();\n                  handleMultiSelect(!isMultiSelected);\n                }}\n              />\n            }\n            <NoteUnpostedCommentIndicator annotationId={annotation.Id} />\n            {!isNoteStateDisabled && !isReply && !isMultiSelectMode && !isGroupMember && !isTrackedChange &&\n              <NoteState\n                annotation={annotation}\n                isSelected={isSelected}\n              />\n            }\n            {!isEditing && isSelected && !isMultiSelectMode && !isGroupMember && !isTrackedChange &&\n              <NotePopup\n                noteIndex={noteIndex}\n                annotation={annotation}\n                setIsEditing={setIsEditing}\n                isReply={isReply}\n              />\n            }\n            {isSelected && isTrackedChange && !isMultiSelectMode &&\n              <>\n                <Tooltip content={t('officeEditor.accept')}>\n                  <div\n                    className=\"tracked-change-icon-wrapper accept\"\n                    onClick={() => acceptTrackedChange(annotation)}\n                  >\n                    <Icon className=\"tracked-change-icon\" glyph=\"icon-menu-checkmark\" />\n                  </div>\n                </Tooltip>\n                <Tooltip content={t('officeEditor.reject')}>\n                  <div\n                    className=\"tracked-change-icon-wrapper reject\"\n                    onClick={() => rejectTrackedChange(annotation)}\n                  >\n                    <Icon className=\"tracked-change-icon\" glyph=\"icon-close\" />\n                  </div>\n                </Tooltip>\n              </>\n            }\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nNoteHeader.propTypes = propTypes;\n\nexport default NoteHeader;\n","import NoteHeader from './NoteHeader';\n\nexport default NoteHeader;","import React from 'react';\nimport { useSelector, shallowEqual } from 'react-redux';\nimport selectors from 'selectors';\nimport NoteTextPreview from './NoteTextPreview';\n\nfunction NoteTextPreviewContainer(props) {\n  const [notePanelWidth] = useSelector(\n    (state) => [\n      selectors.getNotesPanelWidth(state),\n    ],\n    shallowEqual,\n  );\n\n  return (\n    <NoteTextPreview {...props} panelWidth={notePanelWidth} />\n  );\n}\n\nexport default NoteTextPreviewContainer;\n","import NoteTextPreviewContainer from './NoteTextPreviewContainer';\n\nexport default NoteTextPreviewContainer;","const icons = {\n  pdf: 'ic-file-pdf',\n  image: 'ic-file-img',\n  cad: 'ic-file-cad',\n  doc: 'ic-file-doc',\n  ppt: 'ic-file-ppt',\n  xls: 'ic-file-xls',\n  unknown: 'ic-file-etc'\n};\n\nconst FileAttachmentUtils = window.Core.Annotations.FileAttachmentUtils;\n\nexport async function decompressFileContent(file) {\n  return FileAttachmentUtils.decompressWithFlateDecode(file.content, file.type);\n}\n\nexport async function setAnnotationAttachments(annotation, files = []) {\n  await annotation.setAttachments(files);\n}\n\nexport function isImage(file) {\n  if (file.type && file.type.startsWith('image/')) {\n    return true;\n  }\n  return false;\n}\n\nexport function getAttachmentIcon(file) {\n  if (isImage(file)) {\n    return icons.image;\n  }\n  const extension = file.name?.split('.').pop().toLowerCase();\n  switch (extension) {\n    case 'pdf':\n      return icons.pdf;\n    case 'cad':\n      return icons.cad;\n    case 'doc':\n    case 'docx':\n      return icons.doc;\n    case 'ppt':\n    case 'pptx':\n      return icons.ppt;\n    case 'xls':\n    case 'xlsx':\n      return icons.xls;\n    default:\n      return icons.unknown;\n  }\n}\n","import DOMPurify from 'dompurify';\n\nconst SVG_MIME_TYPE = 'image/svg+xml';\n\nconst hasFileSize = (file) => {\n  return file.size !== undefined;\n};\n\n// Taken from https://github.com/mattkrick/sanitize-svg/blob/master/src/sanitizeSVG.ts#L31\nconst readAsText = (svg) => {\n  return new Promise((resolve) => {\n    if (!hasFileSize(svg)) {\n      resolve(svg.toString('utf-8'));\n    } else {\n      const fileReader = new FileReader();\n      fileReader.onload = () => resolve(fileReader.result);\n      fileReader.readAsText(svg);\n    }\n  });\n};\n\nexport const isSVG = (file) => {\n  return file.type === SVG_MIME_TYPE;\n};\n\nexport const sanitizeSVG = async (file) => {\n  const svgText = await readAsText(file);\n  if (!svgText) {\n    return { svg: file };\n  }\n\n  const forbiddenTags = [];\n  DOMPurify.addHook('uponSanitizeElement', (_, hookEvent) => {\n    const { tagName, allowedTags } = hookEvent;\n    if (!allowedTags[tagName]) {\n      forbiddenTags.push(tagName);\n    }\n  });\n\n  const clean = DOMPurify.sanitize(svgText);\n  const svg = new Blob([clean], { type: SVG_MIME_TYPE });\n  return { svg, isDirty: forbiddenTags.length > 0 };\n};","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport { useTranslation } from 'react-i18next';\nimport { useSelector } from 'react-redux';\nimport selectors from 'selectors';\nimport { saveAs } from 'file-saver';\nimport Button from 'components/Button';\nimport Icon from 'components/Icon';\nimport Tooltip from 'components/Tooltip';\nimport { getAttachmentIcon, isImage, decompressFileContent } from 'helpers/ReplyAttachmentManager';\nimport { isSVG, sanitizeSVG } from 'helpers/sanitizeSVG';\n\nimport './ReplyAttachmentList.scss';\n\nconst ImagePreview = ({ file }) => {\n  const [t] = useTranslation();\n\n  const [src, setSrc] = useState();\n  const [isDirtySVG, setIsDirtySvg] = useState(false);\n\n  useEffect(() => {\n    const processImagePreview = async () => {\n      setIsDirtySvg(false);\n      let fileToSanitize = file;\n\n      const isImageFromPDF = !(file instanceof File) && !file.url;\n      if (isImageFromPDF) {\n        fileToSanitize = await decompressFileContent(file);\n      }\n\n      if (file instanceof File || isImageFromPDF) {\n        if (isSVG(file)) {\n          const { svg, isDirty } = await sanitizeSVG(fileToSanitize);\n          setSrc(URL.createObjectURL(svg));\n          setIsDirtySvg(isDirty);\n        } else {\n          setSrc(URL.createObjectURL(fileToSanitize));\n        }\n      }\n    };\n    processImagePreview();\n  }, [file]);\n\n  return (\n    <div className={classNames({\n      'reply-attachment-preview': true,\n      'dirty': isDirtySVG,\n    })}>\n      <img src={src} />\n      {isDirtySVG && <span className=\"reply-attachment-preview-message\">{t('message.svgMalicious')}</span>}\n    </div>\n  );\n};\n\nconst ReplyAttachmentList = ({ files, isEditing, fileDeleted }) => {\n  const [tabManager, previewEnabled] = useSelector((state) => [\n    selectors.getTabManager(state),\n    selectors.isReplyAttachmentPreviewEnabled(state)\n  ]);\n\n  const onClick = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    if (!tabManager) {\n      return console.warn('Can\\'t open attachment in non-multi-tab mode');\n    }\n\n    let fileData;\n    if (file instanceof File) {\n      fileData = file;\n    } else if (file.url) {\n      fileData = file.url;\n    } else {\n      fileData = await decompressFileContent(file);\n    }\n\n    fileData && tabManager.addTab(fileData, {\n      filename: file.name,\n      setActive: true,\n      saveCurrentActiveTabState: true\n    });\n  };\n\n  const onDelete = (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    fileDeleted(file);\n  };\n\n  const onDownload = async (e, file) => {\n    e.preventDefault();\n    e.stopPropagation();\n\n    const fileData = file.url ? file.url : await decompressFileContent(file);\n    saveAs(fileData, file.name);\n  };\n\n  return (\n    <div className=\"reply-attachment-list\">\n      {files.map((file, i) => (\n        <div\n          className=\"reply-attachment\"\n          key={i}\n          onClick={(e) => onClick(e, file)}\n        >\n          {previewEnabled && isImage(file) && (\n            <ImagePreview file={file} />\n          )}\n          <div className=\"reply-attachment-info\">\n            <Icon\n              className=\"reply-attachment-icon\"\n              glyph={getAttachmentIcon(file)}\n            />\n            <Tooltip content={file.name}>\n              <div className=\"reply-file-name\">{file.name}</div>\n            </Tooltip>\n            {isEditing ? (\n              <Button\n                className=\"attachment-button\"\n                img=\"icon-close\"\n                onClick={(e) => onDelete(e, file)}\n              />\n            ) : (\n              <Button\n                className=\"attachment-button\"\n                img=\"icon-download\"\n                onClick={(e) => onDownload(e, file)}\n              />\n            )}\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\nexport default ReplyAttachmentList;\n","import ReplyAttachmentList from './ReplyAttachmentList';\n\nexport default ReplyAttachmentList;","import mentionsManager from './MentionsManager';\n/*\n * Transforming RichText Style object into the Object acceptable by React Quill component.\n */\n\nconst setReactQuillContent = (annotation, editor) => {\n  const richTextStyle = annotation.getRichTextStyle();\n  const indexes = Object.keys(richTextStyle);\n  const formattedText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n  const text = mentionsManager.extractMentionDataFromStr(formattedText).plainTextValue;\n  const ops = [];\n\n  for (let i = 0; i < indexes.length; i++) {\n    const element = richTextStyle[indexes[i]];\n    const attr = getAttributtes(element);\n\n    if (isNaN(indexes[i])) {\n      continue;\n    }\n\n    const lastIndex = isNaN(indexes[i + 1]) ? text.length : indexes[i + 1];\n    const textSlice = text.slice(indexes[i], lastIndex);\n\n    ops.push({ insert: textSlice, attributes: attr });\n  }\n\n  editor.setContents(ops);\n  editor.setSelection(text.length, 0);\n};\n\nconst getAttributtes = (element) => {\n  const attr = {};\n  if (element['font-weight']) {\n    attr['bold'] = true;\n  }\n  if (element['font-style']) {\n    attr['italic'] = true;\n  }\n  if (element['color']) {\n    attr['color'] = element['color'];\n  }\n  if (element['text-decoration']) {\n    const decoration = element['text-decoration'].split(' ');\n\n    if (decoration.includes('line-through')) {\n      attr['strike'] = true;\n    }\n    if (decoration.includes('word')) {\n      attr['underline'] = true;\n    }\n  }\n\n  return attr;\n};\n\nexport default setReactQuillContent;\n","import React, { useCallback, useContext, useEffect, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { shallowEqual, useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\nimport Autolinker from 'autolinker';\nimport dayjs from 'dayjs';\nimport classNames from 'classnames';\nimport LocalizedFormat from 'dayjs/plugin/localizedFormat';\nimport isString from 'lodash/isString';\n\nimport NoteTextarea from 'components/NoteTextarea';\nimport NoteContext from 'components/Note/Context';\nimport NoteHeader from 'components/NoteHeader';\nimport NoteTextPreview from 'components/NoteTextPreview';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\n\nimport mentionsManager from 'helpers/MentionsManager';\nimport getLatestActivityDate from 'helpers/getLatestActivityDate';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport setReactQuillContent from 'helpers/setReactQuillContent';\nimport { isDarkColorHex, isLightColorHex } from 'helpers/color';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\nimport { isMobile } from 'helpers/device';\n\nimport core from 'core';\nimport { getDataWithKey, mapAnnotationToKey, annotationMapKeys } from 'constants/map';\nimport Theme from 'constants/theme';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport DataElements from 'constants/dataElement';\nimport DataElementWrapper from '../DataElementWrapper';\nimport { COMMON_COLORS } from 'constants/commonColors';\nimport Button from 'components/Button';\n\nimport './NoteContent.scss';\n\ndayjs.extend(LocalizedFormat);\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isEditing: PropTypes.bool,\n  setIsEditing: PropTypes.func,\n  noteIndex: PropTypes.number,\n  isUnread: PropTypes.bool,\n  isNonReplyNoteRead: PropTypes.bool,\n  onReplyClicked: PropTypes.func,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n  isGroupMember: PropTypes.bool,\n};\n\nconst NoteContent = ({\n  annotation,\n  isEditing,\n  setIsEditing,\n  noteIndex,\n  isUnread,\n  isNonReplyNoteRead,\n  onReplyClicked,\n  isMultiSelected,\n  isMultiSelectMode,\n  handleMultiSelect,\n  isGroupMember,\n}) => {\n\n  const noteDateFormat = useSelector((state) => selectors.getNoteDateFormat(state));\n  const iconColor = useSelector((state) => selectors.getIconColor(state, mapAnnotationToKey(annotation), shallowEqual));\n  const isNoteStateDisabled = useSelector((state) => selectors.isElementDisabled(state, 'noteStateFlyout'));\n  const language = useSelector((state) => selectors.getCurrentLanguage(state));\n  const notesShowLastUpdatedDate = useSelector((state) => selectors.notesShowLastUpdatedDate(state));\n  const canCollapseTextPreview = useSelector((state) => selectors.isNotesPanelTextCollapsingEnabled(state));\n  const canCollapseReplyPreview = useSelector((state) => selectors.isNotesPanelRepliesCollapsingEnabled(state));\n  const activeTheme = useSelector((state) => selectors.getActiveTheme(state));\n  const timezone = useSelector((state) => selectors.getTimezone(state));\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n\n  const {\n    isSelected,\n    searchInput,\n    resize,\n    pendingEditTextMap,\n    onTopNoteContentClicked,\n    sortStrategy,\n    showAnnotationNumbering,\n    setPendingEditText\n  } = useContext(NoteContext);\n\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n\n  const isReply = annotation.isReply();\n  const isTrackedChange = mapAnnotationToKey(annotation) === annotationMapKeys.TRACKED_CHANGE;\n\n  const [attachments, setAttachments] = useState([]);\n\n  useEffect(() => {\n    setAttachments(annotation.getAttachments());\n  }, [annotation]);\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'modify') {\n        annotations.forEach((annot) => {\n          if (annot.Id === annotation.Id) {\n            setAttachments(annot.getAttachments());\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener);\n    };\n  }, [annotation]);\n\n  useDidUpdate(() => {\n    if (!isEditing) {\n      dispatch(actions.finishNoteEditing());\n    }\n\n    resize();\n  }, [isEditing]);\n\n  const renderAuthorName = useCallback(\n    (annotation) => {\n      const name = core.getDisplayAuthor(annotation['Author']);\n\n      return name ? (\n        highlightSearchInput(name, searchInput)\n      ) : (\n        t('option.notesPanel.noteContent.noName')\n      );\n    },\n    [searchInput],\n  );\n\n  const skipAutoLink = annotation.getSkipAutoLink && annotation.getSkipAutoLink();\n\n  const renderContents = useCallback(\n    (contents, richTextStyle, fontColor, skipAutoLink) => {\n      const autolinkerContent = [];\n      if (!skipAutoLink) {\n        Autolinker.link(contents, {\n          stripPrefix: false,\n          stripTrailingSlash: false,\n          replaceFn(match) {\n            const href = match.getAnchorHref();\n            const anchorText = match.getAnchorText();\n            const offset = match.getOffset();\n\n            switch (match.getType()) {\n              case 'url':\n              case 'email':\n              case 'phone':\n                autolinkerContent.push({\n                  href,\n                  text: anchorText,\n                  start: offset,\n                  end: offset + match.getMatchedText().length\n                });\n            }\n          }\n        });\n      }\n\n      if (!autolinkerContent.length) {\n        const highlightResult = highlightSearchInput(contents, searchInput, richTextStyle);\n        const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n        const shouldCollapseReply = isReply && canCollapseReplyPreview;\n\n        /*\n         * Case there is no value on Search input, and the collapse of the text is allowed,\n         * just render the value with Text preview component\n         */\n        if (!searchInput && (shouldCollapseAnnotationText || shouldCollapseReply)) {\n          const beforeContent = () => {\n            if (!isTrackedChange) {\n              return null;\n            }\n            const text = annotation['TrackedChangeType'] === 1 ? t('officeEditor.added') : t('officeEditor.deleted');\n            return (\n              <span style={{ color: annotation.FillColor.toString(), fontWeight: 700 }}>{text}</span>\n            );\n          };\n\n          return (\n            <NoteTextPreview\n              linesToBreak={3}\n              comment\n              renderRichText={renderRichText}\n              richTextStyle={richTextStyle}\n              resize={resize}\n              style={fontColor}\n              beforeContent={beforeContent}\n            >\n              {contents}\n            </NoteTextPreview>\n          );\n        }\n        return highlightResult;\n      }\n      const contentToRender = [];\n      let strIdx = 0;\n      // Iterate through each case detected by Autolinker, wrap all content\n      // before the current link in a span tag, and wrap the current link\n      // in our own anchor tag\n      autolinkerContent.forEach((anchorData, forIdx) => {\n        const { start, end, href } = anchorData;\n        if (strIdx < start) {\n          contentToRender.push(\n            <span key={`span_${forIdx}`}>\n              {\n                highlightSearchInput(\n                  contents,\n                  searchInput,\n                  richTextStyle,\n                  strIdx,\n                  start\n                )\n              }\n            </span>\n          );\n        }\n        contentToRender.push(\n          <a\n            href={href}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            key={`a_${forIdx}`}\n          >\n            {\n              highlightSearchInput(\n                contents,\n                searchInput,\n                richTextStyle,\n                start,\n                end\n              )\n            }\n          </a>\n        );\n        strIdx = end;\n      });\n      // Ensure any content after the last link is accounted for\n      if (strIdx < contents.length - 1) {\n        contentToRender.push(highlightSearchInput(\n          contents,\n          searchInput,\n          richTextStyle,\n          strIdx\n        ));\n      }\n      return contentToRender;\n    },\n    [searchInput]\n  );\n\n  const icon = getDataWithKey(mapAnnotationToKey(annotation)).icon;\n  let customData;\n  try {\n    customData = JSON.parse(annotation.getCustomData('trn-mention'));\n  } catch (e) {\n    customData = annotation.getCustomData('trn-mention');\n  }\n  const contents = customData?.contents || annotation.getContents();\n  const contentsToRender = annotation.getContents();\n  const richTextStyle = annotation.getRichTextStyle();\n  let textColor = annotation['TextColor'];\n\n  if (activeTheme === Theme.DARK) {\n    if (textColor && isDarkColorHex(textColor.toHexString())) {\n      textColor = new window.Core.Annotations.Color(255, 255, 255, 1);\n    }\n\n    if (richTextStyle) {\n      const sections = Object.keys(richTextStyle);\n      sections.forEach((a) => {\n        if (richTextStyle[a]['color'] && isDarkColorHex(richTextStyle[a]['color'])) {\n          richTextStyle[a]['color'] = COMMON_COLORS['white'];\n        }\n      });\n    }\n  } else if (activeTheme === Theme.LIGHT) {\n    if (textColor && isLightColorHex(textColor.toHexString())) {\n      textColor = new window.Core.Annotations.Color(0, 0, 0, 1);\n    }\n\n    if (richTextStyle) {\n      const sections = Object.keys(richTextStyle);\n      sections.forEach((a) => {\n        if (richTextStyle[a]['color'] && isLightColorHex(richTextStyle[a]['color'])) {\n          richTextStyle[a]['color'] = COMMON_COLORS['black'];\n        }\n      });\n    }\n  }\n  // This is the text placeholder passed to the ContentArea\n  // It ensures that if we try and edit, we get the right placeholder\n  // depending on whether the comment has been saved to the annotation or not\n  const thereIsNoUnpostedEdit = typeof pendingEditTextMap[annotation.Id] === 'undefined';\n  let textAreaValue;\n  if (contents && thereIsNoUnpostedEdit) {\n    textAreaValue = contents;\n  } else {\n    textAreaValue = pendingEditTextMap[annotation.Id];\n  }\n\n  const handleNoteContentClicked = () => {\n    if (!isGroupMember) {\n      if (isReply) {\n        onReplyClicked(annotation);\n      } else if (!isEditing) {\n        // collapse expanded note when top noteContent is clicked if it's not being edited\n        onTopNoteContentClicked();\n      }\n    }\n  };\n\n  const handleContentsClicked = (e) => {\n    if (window.getSelection()?.toString()) {\n      e?.stopPropagation();\n    }\n  };\n\n  const noteContentClass = classNames({\n    NoteContent: true,\n    isReply,\n    unread: isUnread, // The note content itself is unread or it has unread replies\n    clicked: isNonReplyNoteRead, // The top note content is read\n    'modular-ui': customizableUI,\n  });\n\n  const content = useMemo(\n    () => {\n      const contentStyle = {};\n      if (textColor) {\n        contentStyle.color = textColor.toHexString();\n      }\n\n      return (\n        <>\n          {(isEditing && isSelected) ? (\n            <ContentArea\n              annotation={annotation}\n              noteIndex={noteIndex}\n              setIsEditing={setIsEditing}\n              textAreaValue={textAreaValue}\n              onTextAreaValueChange={setPendingEditText}\n              pendingText={pendingEditTextMap[annotation.Id]}\n            />\n          ) : (\n            contentsToRender && (\n              <div className={classNames('container', { 'reply-content': isReply })} onClick={handleContentsClicked}>\n                {isReply && (attachments.length > 0) && (\n                  <ReplyAttachmentList\n                    files={attachments}\n                    isEditing={false}\n                  />\n                )}\n                {renderContents(contentsToRender, richTextStyle, contentStyle, skipAutoLink)}\n              </div>\n            )\n          )}\n        </>\n      );\n    },\n    [annotation, isSelected, isEditing, setIsEditing, contents, renderContents, textAreaValue, setPendingEditText, attachments]\n  );\n\n  const text = annotation.getCustomData('trn-annot-preview');\n  const textPreview = useMemo(\n    () => {\n      if (text === '') {\n        return null;\n      }\n\n      const highlightSearchResult = highlightSearchInput(text, searchInput);\n      const shouldCollapseAnnotationText = !isReply && canCollapseTextPreview;\n      // If we have a search result do not use text\n      // preview but instead show the entire text\n      if (isString(highlightSearchResult) && shouldCollapseAnnotationText) {\n        return (\n          <DataElementWrapper\n            className=\"selected-text-preview\"\n            dataElement=\"notesSelectedTextPreview\">\n            <NoteTextPreview linesToBreak={3}>\n              {`\"${highlightSearchResult}\"`}\n            </NoteTextPreview>\n          </DataElementWrapper>\n        );\n      }\n      return (\n        <div className=\"selected-text-preview\" style={{ paddingRight: '12px' }}>\n          {highlightSearchResult}\n        </div>\n      );\n    }, [text, searchInput]);\n\n  const header = useMemo(\n    () => {\n      return (\n        <NoteHeader\n          icon={icon}\n          iconColor={iconColor}\n          annotation={annotation}\n          language={language}\n          noteDateFormat={noteDateFormat}\n          isSelected={isSelected}\n          setIsEditing={setIsEditing}\n          notesShowLastUpdatedDate={notesShowLastUpdatedDate}\n          isReply={isReply}\n          isUnread={isUnread}\n          renderAuthorName={renderAuthorName}\n          isNoteStateDisabled={isNoteStateDisabled}\n          isEditing={isEditing}\n          noteIndex={noteIndex}\n          sortStrategy={sortStrategy}\n          activeTheme={activeTheme}\n          handleMultiSelect={handleMultiSelect}\n          isMultiSelected={isMultiSelected}\n          isMultiSelectMode={isMultiSelectMode}\n          isGroupMember={isGroupMember}\n          showAnnotationNumbering={showAnnotationNumbering}\n          timezone={timezone}\n          isTrackedChange={isTrackedChange}\n        />\n      );\n    }, [icon, iconColor, annotation, language, noteDateFormat, isSelected, setIsEditing, notesShowLastUpdatedDate, isReply, isUnread, renderAuthorName, core.getDisplayAuthor(annotation['Author']), isNoteStateDisabled, isEditing, noteIndex, getLatestActivityDate(annotation), sortStrategy, handleMultiSelect, isMultiSelected, isMultiSelectMode, isGroupMember, timezone, isTrackedChange]\n  );\n\n  return (\n    <div className={noteContentClass} onClick={handleNoteContentClicked}>\n      {header}\n      {textPreview}\n      {content}\n    </div>\n  );\n};\n\nNoteContent.propTypes = propTypes;\n\nexport default NoteContent;\n\n// a component that contains the content textarea, the save button and the cancel button\nconst ContentArea = ({\n  annotation,\n  noteIndex,\n  setIsEditing,\n  textAreaValue,\n  onTextAreaValueChange,\n  pendingText\n}) => {\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isMentionEnabled,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    isNotesPanelOpen,\n    activeDocumentViewerKey,\n    isAnyCustomPanelOpen,\n  ] = useSelector((state) => [\n    selectors.getAutoFocusNoteOnAnnotationSelection(state),\n    selectors.getIsMentionEnabled(state),\n    selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n    selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n    selectors.getActiveDocumentViewerKey(state),\n    selectors.isAnyCustomPanelOpen(state),\n  ]);\n  const [t] = useTranslation();\n  const textareaRef = useRef();\n  const isReply = annotation.isReply();\n  const {\n    setCurAnnotId,\n    pendingAttachmentMap,\n    deleteAttachment,\n    clearAttachments,\n    addAttachments\n  } = useContext(NoteContext);\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    if (isAnyCustomPanelOpen || (isNotesPanelOpen || isInlineCommentOpen) && textareaRef.current) {\n      const editor = textareaRef.current.getEditor();\n      const isFreeTextAnnnotation = annotation && annotation instanceof window.Core.Annotations.FreeTextAnnotation;\n      isFreeTextAnnnotation && editor.setText('');\n\n      /**\n       * If there is a pending text we should update the annotation rich text style\n       * with this pending text style.\n       */\n      if (pendingText) {\n        setAnnotationRichTextStyle(editor, annotation);\n      } else if (editor.getContents()) {\n        setTimeout(() => {\n          // need setTimeout because textarea seem to rerender and unfocus\n          if (isMentionEnabled) {\n            textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n            const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n            if (ids.length) {\n              editor.setText(plainTextValue);\n            }\n          }\n\n          if (shouldNotFocusOnInput) {\n            return;\n          }\n\n          if (autoFocusNoteOnAnnotationSelection) {\n            textareaRef.current?.focus();\n            const annotRichTextStyle = annotation.getRichTextStyle();\n            if (annotRichTextStyle) {\n              setReactQuillContent(annotation, editor);\n            }\n          }\n        }, 100);\n      }\n\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      setTimeout(() => {\n        if (textLength) {\n          editor.setSelection(textLength, textLength);\n        }\n      }, 100);\n    }\n  }, [isNotesPanelOpen, isInlineCommentOpen, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    if (isReply && pendingAttachments.length === 0) {\n      // Load attachments\n      const attachments = annotation.getAttachments();\n      addAttachments(annotation.Id, attachments);\n    }\n  }, []);\n\n  const setContents = async (e) => {\n    // prevent the textarea from blurring out which will unmount these two buttons\n    e.preventDefault();\n\n    const editor = textareaRef.current.getEditor();\n    textAreaValue = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n    setAnnotationRichTextStyle(editor, annotation);\n\n    const skipAutoLink = annotation.getSkipAutoLink && annotation.getSkipAutoLink();\n    if (skipAutoLink) {\n      annotation.disableSkipAutoLink();\n    }\n\n    if (isMentionEnabled) {\n      const { plainTextValue, ids } = mentionsManager.extractMentionDataFromStr(textAreaValue);\n\n      // If modified, double check for ids\n      const annotMentionData = mentionsManager.extractMentionDataFromAnnot(annotation);\n      annotMentionData.mentions.forEach((mention) => {\n        if (plainTextValue.includes(mention.value)) {\n          ids.push(mention.id);\n        }\n      });\n\n      annotation.setCustomData('trn-mention', JSON.stringify({\n        contents: textAreaValue,\n        ids,\n      }));\n      annotation.setContents(plainTextValue);\n    } else {\n      annotation.setContents(textAreaValue);\n    }\n\n    await setAnnotationAttachments(annotation, pendingAttachmentMap[annotation.Id]);\n\n    const source = (annotation instanceof window.Core.Annotations.FreeTextAnnotation)\n      ? 'textChanged' : 'noteChanged';\n    core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[annotation], 'modify', { 'source': source }]);\n\n    if (annotation instanceof window.Core.Annotations.FreeTextAnnotation) {\n      core.drawAnnotationsFromList([annotation]);\n    }\n\n    setIsEditing(false, noteIndex);\n    // Only set comment to unposted state if it is not empty\n    if (textAreaValue !== '') {\n      onTextAreaValueChange(undefined, annotation.Id);\n    }\n    clearAttachments(annotation.Id);\n  };\n\n  const onBlur = (e) => {\n    if (e.relatedTarget?.getAttribute('data-element')?.includes('annotationCommentButton')) {\n      e.target.focus();\n      return;\n    }\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setCurAnnotId(annotation.Id);\n  };\n\n  const contentClassName = classNames('edit-content', { 'reply-content': isReply });\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (\n    <div className={contentClassName}>\n      {isReply && pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <NoteTextarea\n        ref={(el) => {\n          textareaRef.current = el;\n        }}\n        value={textAreaValue}\n        onChange={(value) => onTextAreaValueChange(value, annotation.Id)}\n        onSubmit={setContents}\n        isReply={isReply}\n        onBlur={onBlur}\n        onFocus={onFocus}\n      />\n      <div className=\"edit-buttons\">\n        <Button\n          className=\"cancel-button\"\n          label={t('action.cancel')}\n          onClick={(e) => {\n            e.stopPropagation();\n            setIsEditing(false, noteIndex);\n            // Clear pending text\n            onTextAreaValueChange(undefined, annotation.Id);\n            clearAttachments(annotation.Id);\n          }}\n        />\n        <Button\n          className={`save-button${!textAreaValue ? ' disabled' : ''}`}\n          disabled={!textAreaValue}\n          label={t('action.save')}\n          onClick={(e) => {\n            e.stopPropagation();\n            setContents(e);\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n\nContentArea.propTypes = {\n  noteIndex: PropTypes.number.isRequired,\n  annotation: PropTypes.object.isRequired,\n  setIsEditing: PropTypes.func.isRequired,\n  textAreaValue: PropTypes.string,\n  onTextAreaValueChange: PropTypes.func.isRequired,\n  pendingText: PropTypes.string\n};\n\nconst getRichTextSpan = (text, richTextStyle, key) => {\n  const style = {\n    fontWeight: richTextStyle['font-weight'],\n    fontStyle: richTextStyle['font-style'],\n    textDecoration: richTextStyle['text-decoration'],\n    color: richTextStyle['color']\n  };\n  if (style.textDecoration) {\n    style.textDecoration = style.textDecoration.replace('word', 'underline');\n  }\n  return (\n    <span style={style} key={key}>{text}</span>\n  );\n};\n\nconst renderRichText = (text, richTextStyle, start) => {\n  if (!richTextStyle || !text) {\n    return text;\n  }\n\n  const styles = {};\n  const indices = Object.keys(richTextStyle).map(Number).sort((a, b) => a - b);\n  for (let i = 0; i < indices.length; i++) {\n    let index = indices[i] - start;\n    index = Math.min(Math.max(index, 0), text.length);\n    styles[index] = richTextStyle[indices[i]];\n    if (index === text.length) {\n      break;\n    }\n  }\n\n  const contentToRender = [];\n  const styleIndices = Object.keys(styles).map(Number).sort((a, b) => a - b);\n  for (let i = 1; i < styleIndices.length; i++) {\n    contentToRender.push(getRichTextSpan(\n      text.slice(styleIndices[i - 1], styleIndices[i]),\n      styles[styleIndices[i - 1]],\n      `richtext_span_${i}`\n    ));\n  }\n\n  return contentToRender;\n};\n\nconst highlightSearchInput = (fullText, searchInput, richTextStyle, start = 0, end = fullText.length) => {\n  const text = fullText.slice(start, end);\n  const loweredText = text.toLowerCase();\n  const loweredSearchInput = searchInput.toLowerCase();\n  if (richTextStyle) {\n    richTextStyle['0'] = richTextStyle['0'] || {};\n    richTextStyle[fullText.length] = richTextStyle[fullText.length] || {};\n  }\n  let lastFoundInstance = loweredText.indexOf(loweredSearchInput);\n  if (!loweredSearchInput.trim() || lastFoundInstance === -1) {\n    return renderRichText(text, richTextStyle, start);\n  }\n  const contentToRender = [];\n  const allFoundPositions = [lastFoundInstance];\n  // Escape all RegExp special characters\n  const regexSafeSearchInput = loweredSearchInput.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n  if (new RegExp(`(${regexSafeSearchInput})`, 'gi').test(loweredText)) {\n    while (lastFoundInstance !== -1) {\n      lastFoundInstance = loweredText.indexOf(loweredSearchInput, lastFoundInstance + loweredSearchInput.length);\n      if (lastFoundInstance !== -1) {\n        allFoundPositions.push(lastFoundInstance);\n      }\n    }\n  }\n  allFoundPositions.forEach((position, idx) => {\n    // Account for any content at the beginning of the string before the first\n    // instance of the searchInput\n    if (idx === 0 && position !== 0) {\n      contentToRender.push(renderRichText(text.substring(0, position), richTextStyle, start));\n    }\n    contentToRender.push(\n      <span className=\"highlight\" key={`highlight_span_${idx}`}>\n        {\n          renderRichText(\n            text.substring(position, position + loweredSearchInput.length),\n            richTextStyle,\n            start + position)\n        }\n      </span>\n    );\n    if (\n      // Ensure that we do not try to make an out-of-bounds access\n      position + loweredSearchInput.length < loweredText.length\n      // Ensure that this is the end of the allFoundPositions array\n      && position + loweredSearchInput.length !== allFoundPositions[idx + 1]\n    ) {\n      contentToRender.push(renderRichText(\n        text.substring(position + loweredSearchInput.length, allFoundPositions[idx + 1]),\n        richTextStyle,\n        start + position + loweredSearchInput.length\n      ));\n    }\n  });\n  return contentToRender;\n};\n","import NoteContent from './NoteContent';\n\nexport default NoteContent;","import React, { useState, useEffect, useRef, useContext } from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport NoteContext from 'components/Note/Context';\nimport NoteTextarea from 'components/NoteTextarea';\nimport ReplyAttachmentList from 'components/ReplyAttachmentList';\nimport Button from 'components/Button';\nimport classNames from 'classnames';\nimport core from 'core';\nimport mentionsManager from 'helpers/MentionsManager';\nimport setAnnotationRichTextStyle from 'helpers/setAnnotationRichTextStyle';\nimport { setAnnotationAttachments } from 'helpers/ReplyAttachmentManager';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile } from 'src/helpers/device';\nimport DataElements from 'src/constants/dataElement';\n\nimport './ReplyArea.scss';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n};\n\n// a component that contains the reply textarea, the reply button and the cancel button\nconst ReplyArea = ({ annotation, isUnread, onPendingReplyChange }) => {\n  const [\n    autoFocusNoteOnAnnotationSelection,\n    isReadOnly,\n    isReplyDisabled,\n    isReplyDisabledForAnnotation,\n    isMentionEnabled,\n    isNoteEditingTriggeredByAnnotationPopup,\n    isInlineCommentDisabled,\n    isInlineCommentOpen,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getAutoFocusNoteOnAnnotationSelection(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.isElementDisabled(state, 'noteReply'),\n      selectors.getIsReplyDisabled(state)?.(annotation),\n      selectors.getIsMentionEnabled(state),\n      selectors.getIsNoteEditing(state),\n      selectors.isElementDisabled(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.isElementOpen(state, DataElements.INLINE_COMMENT_POPUP),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual\n  );\n  const {\n    isContentEditable,\n    isSelected,\n    pendingReplyMap,\n    setPendingReply,\n    isExpandedFromSearch,\n    scrollToSelectedAnnot,\n    setCurAnnotId,\n    pendingAttachmentMap,\n    clearAttachments,\n    deleteAttachment\n  } = useContext(NoteContext);\n  const [isFocused, setIsFocused] = useState(false);\n  const dispatch = useDispatch();\n  const textareaRef = useRef();\n\n  const shouldNotFocusOnInput = !isInlineCommentDisabled && isInlineCommentOpen && isMobile();\n\n  useDidUpdate(() => {\n    if (!isFocused) {\n      dispatch(actions.finishNoteEditing());\n    }\n  }, [isFocused]);\n\n  useEffect(() => {\n    if (shouldNotFocusOnInput) {\n      return;\n    }\n\n    if (\n      isNoteEditingTriggeredByAnnotationPopup &&\n      isSelected &&\n      !isContentEditable &&\n      autoFocusNoteOnAnnotationSelection &&\n      textareaRef &&\n      textareaRef.current\n    ) {\n      textareaRef.current.focus();\n    }\n  }, [isContentEditable, isNoteEditingTriggeredByAnnotationPopup, isSelected, shouldNotFocusOnInput]);\n\n  useEffect(() => {\n    // on initial mount, focus the last character of the textarea\n    // when search item, should disable auto focus\n    if (!isExpandedFromSearch && scrollToSelectedAnnot) {\n      // use \"setTimeout\" to wait for element to be added before focusing to have the blinking text cursor appear\n      setTimeout(() => {\n        // calling focus() cause the \"NotePanel\" to scroll to note that being focused.\n        // we don't want to jump to the selected annotation when scrolling up and down, so only focus once\n        if (textareaRef && textareaRef.current && autoFocusNoteOnAnnotationSelection) {\n          textareaRef.current.focus();\n        }\n      }, 100);\n    }\n    if (textareaRef && textareaRef.current) {\n      if (shouldNotFocusOnInput) {\n        return;\n      }\n\n      const editor = textareaRef.current.getEditor();\n      const lastNewLineCharacterLength = 1;\n      const textLength = editor.getLength() - lastNewLineCharacterLength;\n      setTimeout(() => {\n        if (textareaRef.current) {\n          textareaRef.current.editor.setSelection(textLength, textLength);\n        }\n      }, 100);\n    }\n  }, []);\n\n  const postReply = async (e) => {\n    // prevent the textarea from blurring out\n    e.preventDefault();\n    e.stopPropagation();\n\n    const editor = textareaRef.current.getEditor();\n    const replyText = mentionsManager.getFormattedTextFromDeltas(editor.getContents());\n\n    if (!replyText.trim()) {\n      return;\n    }\n\n    if (isMentionEnabled) {\n      const replyAnnotation = mentionsManager.createMentionReply(annotation, replyText);\n      setAnnotationRichTextStyle(editor, replyAnnotation);\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n      core.addAnnotations([replyAnnotation], activeDocumentViewerKey);\n    } else {\n      const replyAnnotation = core.createAnnotationReply(annotation, replyText);\n      setAnnotationRichTextStyle(editor, replyAnnotation);\n      await setAnnotationAttachments(replyAnnotation, pendingAttachmentMap[annotation.Id]);\n      core.getAnnotationManager(activeDocumentViewerKey).trigger('annotationChanged', [[replyAnnotation], 'modify', {}]);\n    }\n\n    setPendingReply('', annotation.Id);\n    clearAttachments(annotation.Id);\n  };\n\n  const ifReplyNotAllowed =\n    isReadOnly ||\n    isReplyDisabled ||\n    isReplyDisabledForAnnotation;\n\n  const replyAreaClass = classNames({\n    'reply-area': true,\n    unread: isUnread,\n  });\n\n  const replyButtonClass = classNames({\n    'reply-button': true,\n    disabled: !pendingReplyMap[annotation.Id]\n  });\n\n  const handleNoteTextareaChange = (value) => {\n    setPendingReply(value, annotation.Id);\n    onPendingReplyChange && onPendingReplyChange();\n  };\n\n  const onBlur = () => {\n    setIsFocused(false);\n    setCurAnnotId(undefined);\n  };\n\n  const onFocus = () => {\n    setIsFocused(true);\n    setCurAnnotId(annotation.Id);\n  };\n\n  const pendingAttachments = pendingAttachmentMap[annotation.Id] || [];\n\n  return (ifReplyNotAllowed || !isSelected) ? null : (\n    <form onSubmit={postReply} className=\"reply-area-container\">\n      {pendingAttachments.length > 0 && (\n        <ReplyAttachmentList\n          files={pendingAttachments}\n          isEditing={true}\n          fileDeleted={(file) => deleteAttachment(annotation.Id, file)}\n        />\n      )}\n      <div className=\"reply-area-with-button\">\n        <div\n          className={replyAreaClass}\n          // stop bubbling up otherwise the note will be closed\n          // due to annotation deselection\n          onMouseDown={(e) => e.stopPropagation()}\n        >\n          <NoteTextarea\n            ref={(el) => {\n              textareaRef.current = el;\n            }}\n            value={pendingReplyMap[annotation.Id]}\n            onChange={(value) => handleNoteTextareaChange(value)}\n            onSubmit={postReply}\n            onBlur={onBlur}\n            onFocus={onFocus}\n            isReply\n          />\n        </div>\n        <div className=\"reply-button-container\">\n          <Button\n            img=\"icon-post-reply\"\n            className={replyButtonClass}\n            onClick={postReply}\n            isSubmitType\n          />\n        </div>\n      </div>\n    </form>\n  );\n};\n\nReplyArea.propTypes = propTypes;\n\nexport default ReplyArea;\n","import ReplyArea from './ReplyArea';\n\nexport default ReplyArea;","import React, { useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport Icon from 'components/Icon';\nimport NoteContent from 'components/NoteContent';\nimport PropTypes from 'prop-types';\nimport core from 'core';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport classNames from 'classnames';\n\nconst propTypes = {\n  groupAnnotations: PropTypes.array.isRequired,\n  isMultiSelectMode: PropTypes.bool.isRequired,\n};\n\nconst NoteGroupSection = ({\n  groupAnnotations,\n  isMultiSelectMode,\n}) => {\n  const [t] = useTranslation();\n  const dispatch = useDispatch();\n  const [isViewingGroupAnnots, setIsViewingGroupAnnots] = useState(false);\n  const customizableUI = useSelector((state) => selectors.getFeatureFlags(state)?.customizableUI);\n\n  const upArrow = 'ic_chevron_up_black_24px';\n  const downArrow = 'ic_chevron_down_black_24px';\n\n  const ViewAllAnnotsButton = (\n    <div\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(true);\n      }}\n      className=\"text-button\"\n    >\n      {t('component.noteGroupSection.open')}\n      <Icon glyph={downArrow} />\n    </div>\n  );\n  const CloseAllAnnotsButton = (\n    <div\n      onClick={(e) => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsViewingGroupAnnots(false);\n      }}\n      className=\"text-button\"\n    >\n      {t('component.noteGroupSection.close')}\n      <Icon glyph={upArrow} />\n    </div>\n  );\n\n  return (\n    <div\n      className={classNames({\n        'group-section': true,\n        'modular-ui': customizableUI,\n      })}\n    >\n      {isViewingGroupAnnots ? CloseAllAnnotsButton : ViewAllAnnotsButton}\n      {isViewingGroupAnnots &&\n        groupAnnotations.map((groupAnnotation, i) => {\n          // Ignore the group primary annotation\n          if (i === 0) {\n            return null;\n          }\n          return (\n            <div\n              key={groupAnnotation.Id}\n              className=\"group-child\"\n              onClick={(e) => {\n                e.preventDefault();\n                e.stopPropagation();\n                core.selectAnnotation(groupAnnotation);\n                core.jumpToAnnotation(groupAnnotation);\n                dispatch(actions.openElement('annotationPopup'));\n              }}\n            >\n              <NoteContent\n                key={groupAnnotation.Id}\n                annotation={groupAnnotation}\n                isUnread={false}\n                isGroupMember={true}\n                isMultiSelectMode={isMultiSelectMode}\n              />\n            </div>\n          );\n        })\n      }\n    </div>\n  );\n};\n\nNoteGroupSection.propTypes = propTypes;\n\nexport default NoteGroupSection;","import React, { useEffect, useState, useCallback } from 'react';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport core from 'core';\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport { createPortal } from 'react-dom';\nimport { getAnnotationPosition } from 'helpers/getPopupPosition';\nimport getRootNode from 'helpers/getRootNode';\nimport DataElements from 'constants/dataElement';\n\nimport './AnnotationNoteConnectorLine.scss';\n\nconst LineConnectorPortal = ({ children }) => {\n  const mount = getRootNode().querySelector('#line-connector-root');\n  const el = document.createElement('div');\n  el.setAttribute('data-element', DataElements.ANNOTATION_NOTE_CONNECTOR_LINE);\n\n  useEffect(() => {\n    mount.appendChild(el);\n    return () => mount.removeChild(el);\n  }, [el, mount]);\n\n  return createPortal(children, el);\n};\n\nconst AnnotationNoteConnectorLine = ({ annotation, noteContainerRef, isCustomPanelOpen }) => {\n  const [\n    notePanelWidth,\n    lineIsOpen,\n    notePanelIsOpen,\n    isLineDisabled,\n    documentContainerWidth,\n    documentContainerHeight,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.getNotesPanelWidth(state),\n      selectors.isElementOpen(state, DataElements.ANNOTATION_NOTE_CONNECTOR_LINE),\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n      selectors.isElementDisabled(state, DataElements.ANNOTATION_NOTE_CONNECTOR_LINE),\n      selectors.getDocumentContainerWidth(state),\n      selectors.getDocumentContainerHeight(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n\n  const dispatch = useDispatch();\n\n  // Right Horizontal Line\n  const [rightHorizontalLineWidth, setRightHorizontalLineWidth] = useState(0);\n  const [rightHorizontalLineTop, setRightHorizontalLineTop] = useState(0);\n  const [rightHorizontalLineRight, setRightHorizontalLineRight] = useState(0);\n\n  // Left Horizontal Line\n  const [leftHorizontalLineWidth, setLeftHorizontalLineWidth] = useState(0);\n  const [leftHorizontalLineTop, setLeftHorizontalLineTop] = useState(0);\n  const [leftHorizontalLineRight, setLeftHorizontalLineRight] = useState(0);\n\n  const {\n    bottomRight: annotationBottomRight,\n    topLeft: annotationTopLeft\n  } = getAnnotationPosition(annotation, activeDocumentViewerKey);\n\n  const getAnnotationLineOffset = useCallback(() => {\n    if (annotation.Subject === 'Note') {\n      return 4;\n    }\n    return 15;\n  }, [annotation]);\n\n  useEffect(() => {\n    const { scrollTop, scrollLeft } = core.getScrollViewElement(activeDocumentViewerKey);\n    const notePanelLeftPadding = 16;\n    const isAnnotationPositionInvalid = !(annotationBottomRight && annotationTopLeft);\n    if (isAnnotationPositionInvalid) {\n      return () => {\n        dispatch(actions.closeElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE));\n      };\n    }\n    const annotWidthInPixels = annotationBottomRight.x - annotationTopLeft.x;\n    const annotHeightInPixels = annotationBottomRight.y - annotationTopLeft.y;\n\n    const viewerWidth = window.isApryseWebViewerWebComponent ? getRootNode().host.clientWidth : window.innerWidth;\n    const viewerOffsetTop = window.isApryseWebViewerWebComponent ? getRootNode().host.offsetTop : 0;\n\n    setRightHorizontalLineRight(notePanelWidth - notePanelLeftPadding);\n    setRightHorizontalLineTop(noteContainerRef.current.getBoundingClientRect().top - viewerOffsetTop);\n    const lineWidth = viewerWidth - notePanelWidth - annotationTopLeft.x + notePanelLeftPadding + scrollLeft - annotWidthInPixels;\n    const rightHorizontalLineWidthRatio = 0.75;\n    setRightHorizontalLineWidth(lineWidth * rightHorizontalLineWidthRatio);\n    const noZoomRefPoint = annotation.getNoZoomReferencePoint();\n    const noZoomRefShiftX = (annotation.NoZoom && noZoomRefPoint.x) ? noZoomRefPoint.x * annotHeightInPixels : 0;\n    setLeftHorizontalLineWidth(lineWidth - rightHorizontalLineWidth - getAnnotationLineOffset() + noZoomRefShiftX);\n\n    setLeftHorizontalLineRight(notePanelWidth - notePanelLeftPadding + rightHorizontalLineWidth);\n\n    const noZoomRefShiftY = (annotation.NoZoom && noZoomRefPoint.y) ? noZoomRefPoint.y * annotHeightInPixels : 0;\n    setLeftHorizontalLineTop(annotationTopLeft.y + (annotHeightInPixels / 2) - scrollTop - noZoomRefShiftY);\n\n    const onPageNumberUpdated = () => {\n      dispatch(actions.closeElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE));\n    };\n\n    core.addEventListener('pageNumberUpdated', onPageNumberUpdated, undefined, activeDocumentViewerKey);\n\n    return () => {\n      core.removeEventListener('pageNumberUpdated', onPageNumberUpdated, activeDocumentViewerKey);\n    };\n  }, [noteContainerRef, notePanelWidth, annotationBottomRight, annotationTopLeft, documentContainerWidth, documentContainerHeight, dispatch, activeDocumentViewerKey]);\n\n  if (lineIsOpen && (notePanelIsOpen || isCustomPanelOpen) && !isLineDisabled) {\n    const verticalHeight = Math.abs(rightHorizontalLineTop - leftHorizontalLineTop);\n    const horizontalLineHeight = 2;\n    // Add HorizontalLineHeight of 2px when annot is above note to prevent little gap between lines\n    const verticalTop = rightHorizontalLineTop > leftHorizontalLineTop ? leftHorizontalLineTop + horizontalLineHeight : rightHorizontalLineTop;\n\n    return (\n      <LineConnectorPortal>\n        <div className=\"horizontalLine\" style={{ width: rightHorizontalLineWidth, right: rightHorizontalLineRight, top: rightHorizontalLineTop }} />\n        <div className=\"verticalLine\" style={{ height: verticalHeight, top: verticalTop, right: rightHorizontalLineRight + rightHorizontalLineWidth }} />\n        <div className=\"horizontalLine\" style={{ width: leftHorizontalLineWidth, right: leftHorizontalLineRight, top: leftHorizontalLineTop }}>\n          <div className=\"arrowHead\" />\n        </div>\n      </LineConnectorPortal>);\n  }\n  return null;\n};\n\nexport default AnnotationNoteConnectorLine;\n","import AnnotationNoteConnectorLine from './AnnotationNoteConnectorLine';\n\nexport default AnnotationNoteConnectorLine;","import React, { useEffect, useRef, useContext, useState, useCallback } from 'react';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useSelector, shallowEqual, useDispatch } from 'react-redux';\nimport { useTranslation } from 'react-i18next';\n\nimport NoteContext from 'components/Note/Context';\nimport NoteContent from 'components/NoteContent';\nimport ReplyArea from 'components/Note/ReplyArea';\nimport NoteGroupSection from 'components/Note/NoteGroupSection';\nimport Button from 'components/Button';\n\nimport selectors from 'selectors';\nimport actions from 'actions';\nimport core from 'core';\nimport AnnotationNoteConnectorLine from 'components/AnnotationNoteConnectorLine';\nimport useDidUpdate from 'hooks/useDidUpdate';\nimport DataElements from 'constants/dataElement';\nimport getRootNode from 'helpers/getRootNode';\nimport { mapAnnotationToKey, annotationMapKeys } from 'constants/map';\nimport { OFFICE_EDITOR_EDIT_MODE, OFFICE_EDITOR_TRACKED_CHANGE_KEY } from 'constants/officeEditor';\n\nimport './Note.scss';\n\nconst propTypes = {\n  annotation: PropTypes.object.isRequired,\n  isMultiSelected: PropTypes.bool,\n  isMultiSelectMode: PropTypes.bool,\n  isInNotesPanel: PropTypes.bool,\n  handleMultiSelect: PropTypes.func,\n};\n\nlet currId = 0;\n\nconst Note = ({\n  annotation,\n  isMultiSelected,\n  isMultiSelectMode,\n  isInNotesPanel,\n  handleMultiSelect,\n  isCustomPanelOpen,\n  shouldHideConnectorLine,\n}) => {\n  const {\n    isSelected,\n    resize,\n    pendingEditTextMap,\n    isContentEditable,\n    isDocumentReadOnly,\n    isExpandedFromSearch,\n    // documentViewerKey,\n    setCurAnnotId,\n  } = useContext(NoteContext);\n  const containerRef = useRef();\n  const containerHeightRef = useRef();\n  const [isEditingMap, setIsEditingMap] = useState({});\n  const ids = useRef([]);\n  const dispatch = useDispatch();\n  const [t] = useTranslation();\n  const unreadReplyIdSet = new Set();\n\n  const [\n    noteTransformFunction,\n    customNoteSelectionFunction,\n    unreadAnnotationIdSet,\n    shouldExpandCommentThread,\n    isRightClickAnnotationPopupEnabled,\n    documentViewerKey,\n    isOfficeEditorMode,\n    officeEditorEditMode,\n  ] = useSelector(\n    (state) => [\n      selectors.getNoteTransformFunction(state),\n      selectors.getCustomNoteSelectionFunction(state),\n      selectors.getUnreadAnnotationIdSet(state),\n      selectors.isCommentThreadExpansionEnabled(state),\n      selectors.isRightClickAnnotationPopupEnabled(state),\n      selectors.getActiveDocumentViewerKey(state),\n      selectors.getIsOfficeEditorMode(state),\n      selectors.getOfficeEditorEditMode(state),\n    ],\n    shallowEqual,\n  );\n\n  const replies = annotation\n    .getReplies()\n    .sort((a, b) => a['DateCreated'] - b['DateCreated']);\n\n  replies.filter((r) => unreadAnnotationIdSet.has(r.Id)).forEach((r) => unreadReplyIdSet.add(r.Id));\n\n  useEffect(() => {\n    const annotationChangedListener = (annotations, action) => {\n      if (action === 'delete') {\n        annotations.forEach((annot) => {\n          if (unreadAnnotationIdSet.has(annot.Id)) {\n            dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annot.Id }));\n          }\n        });\n      }\n    };\n    core.addEventListener('annotationChanged', annotationChangedListener, undefined, documentViewerKey);\n\n    return () => {\n      core.removeEventListener('annotationChanged', annotationChangedListener, documentViewerKey);\n    };\n  }, [unreadAnnotationIdSet]);\n\n  useEffect(() => {\n    const prevHeight = containerHeightRef.current;\n    const currHeight = containerRef.current.getBoundingClientRect().height;\n    containerHeightRef.current = currHeight;\n\n    // have a prevHeight check here because we don't want to call resize on mount\n    // use Math.round because in some cases in IE11 these two numbers will differ in just 0.00001\n    // and we don't want call resize in this case\n    if (prevHeight && Math.round(prevHeight) !== Math.round(currHeight)) {\n      resize();\n    }\n  });\n\n  useEffect(() => {\n    if (noteTransformFunction) {\n      const notesPanelElement = getRootNode().querySelectorAll('.NotesPanel')[0];\n      ids.current.forEach((id) => {\n        const child = notesPanelElement.querySelector(`[data-webviewer-custom-element=${id}]`);\n        if (child) {\n          child.parentNode.removeChild(child);\n        }\n      });\n\n      ids.current = [];\n\n      const state = {\n        annotation,\n        isSelected,\n      };\n\n      noteTransformFunction(containerRef.current, state, (...params) => {\n        const element = document.createElement(...params);\n        const id = `custom-element-${currId}`;\n        currId++;\n        ids.current.push(id);\n        element.setAttribute('data-webviewer-custom-element', id);\n        element.addEventListener('mousedown', (e) => {\n          e.stopPropagation();\n        });\n\n        return element;\n      });\n    }\n  });\n\n  useEffect(() => {\n    // If this is not a new one, rebuild the isEditing map\n    const pendingText = pendingEditTextMap[annotation.Id];\n    if (pendingText !== '' && isContentEditable && !isDocumentReadOnly) {\n      setIsEditing(true, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing, annotation, isMultiSelectMode]);\n\n  useDidUpdate(() => {\n    if (isDocumentReadOnly || !isContentEditable) {\n      setIsEditing(false, 0);\n    }\n  }, [isDocumentReadOnly, isContentEditable, setIsEditing]);\n\n  const handleNoteClick = async (e) => {\n    // stop bubbling up otherwise the note will be closed\n    // due to annotation deselection\n    e && e.stopPropagation();\n\n    if (unreadAnnotationIdSet.has(annotation.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: annotation.Id }));\n    }\n\n    customNoteSelectionFunction && customNoteSelectionFunction(annotation);\n    if (!isSelected) {\n      core.deselectAllAnnotations(documentViewerKey);\n\n      // Need this delay to ensure all other event listeners fire before we open the line\n      setTimeout(() => dispatch(actions.openElement(DataElements.ANNOTATION_NOTE_CONNECTOR_LINE)), 300);\n    }\n    if (isInNotesPanel && !(isOfficeEditorMode && officeEditorEditMode === OFFICE_EDITOR_EDIT_MODE.PREVIEW)) {\n      core.selectAnnotation(annotation, documentViewerKey);\n      setCurAnnotId(annotation.Id);\n      core.jumpToAnnotation(annotation, documentViewerKey);\n      if (!isRightClickAnnotationPopupEnabled) {\n        dispatch(actions.openElement(DataElements.ANNOTATION_POPUP));\n      }\n      if (isOfficeEditorMode) {\n        const trackedChangeId = annotation.getCustomData(OFFICE_EDITOR_TRACKED_CHANGE_KEY);\n        await core.getOfficeEditor().moveCursorToTrackedChange(trackedChangeId);\n        core.getOfficeEditor().freezeMainCursor();\n      }\n    }\n  };\n\n  const hasUnreadReplies = unreadReplyIdSet.size > 0;\n\n  const noteClass = classNames({\n    Note: true,\n    expanded: isSelected,\n    'is-multi-selected': isMultiSelected,\n    unread: unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies,\n    'disabled': isOfficeEditorMode && officeEditorEditMode === OFFICE_EDITOR_EDIT_MODE.PREVIEW,\n  });\n\n  const repliesClass = classNames({\n    replies: true,\n    hidden: !isSelected,\n  });\n\n  useEffect(() => {\n    // Must also restore the isEdit for  any replies, in case someone was editing a\n    // reply when a comment was placed above\n    if (!isMultiSelectMode) {\n      replies.forEach((reply, index) => {\n        const pendingText = pendingEditTextMap[reply.Id];\n        if ((pendingText !== '' && typeof pendingText !== 'undefined') && isSelected) {\n          setIsEditing(true, 1 + index);\n        }\n      });\n    }\n  }, [isSelected, isMultiSelectMode]);\n\n  useEffect(() => {\n    if (isMultiSelectMode) {\n      setIsEditing(false, 0);\n    }\n  }, [isMultiSelectMode]);\n\n  const showReplyArea = !Object.values(isEditingMap).some((val) => val);\n\n  const handleNoteKeydown = (e) => {\n    // Click if enter or space is pressed and is current target.\n    const isNote = e.target === e.currentTarget;\n    if (isNote && (e.key === 'Enter' || e.key === ' ')) {\n      e.preventDefault(); // Stop from being entered in field\n      handleNoteClick();\n    }\n  };\n\n  const handleReplyClicked = (reply) => {\n    // set clicked reply as read\n    if (unreadReplyIdSet.has(reply.Id)) {\n      dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: reply.Id }));\n      core.getAnnotationManager(documentViewerKey).selectAnnotation(reply);\n    }\n  };\n\n  const markAllRepliesRead = () => {\n    // set all replies to read state if user starts to type in reply textarea\n    if (unreadReplyIdSet.size > 0) {\n      const repliesSetToRead = replies.filter((r) => unreadReplyIdSet.has(r.Id));\n      core.getAnnotationManager(documentViewerKey).selectAnnotations(repliesSetToRead);\n      repliesSetToRead.forEach((r) => dispatch(actions.setAnnotationReadState({ isRead: true, annotationId: r.Id })));\n    }\n  };\n\n  const setIsEditing = useCallback(\n    (isEditing, index) => {\n      setIsEditingMap((map) => ({\n        ...map,\n        [index]: isEditing,\n      }));\n    },\n    [setIsEditingMap],\n  );\n\n  const groupAnnotations = core.getGroupAnnotations(annotation, documentViewerKey);\n  const isGroup = groupAnnotations.length > 1;\n  const isTrackedChange = mapAnnotationToKey(annotation) === annotationMapKeys.TRACKED_CHANGE;\n  // apply unread reply style to replyArea if the last reply is unread\n  const lastReplyId = replies.length > 0 ? replies[replies.length - 1].Id : null;\n\n  return (\n    <div\n      role=\"button\"\n      tabIndex={0}\n      ref={containerRef}\n      className={noteClass}\n      onClick={handleNoteClick}\n      onKeyDown={handleNoteKeydown}\n      id={`note_${annotation.Id}`}\n    >\n      <NoteContent\n        noteIndex={0}\n        annotation={annotation}\n        setIsEditing={setIsEditing}\n        isEditing={isEditingMap[0]}\n        isNonReplyNoteRead={!unreadAnnotationIdSet.has(annotation.Id)}\n        isUnread={unreadAnnotationIdSet.has(annotation.Id) || hasUnreadReplies}\n        handleMultiSelect={(e) => {\n          setCurAnnotId(annotation.Id);\n          handleMultiSelect(e);\n        }}\n        isMultiSelected={isMultiSelected}\n        isMultiSelectMode={isMultiSelectMode}\n      />\n      {(isSelected || isExpandedFromSearch || shouldExpandCommentThread) && !isTrackedChange && (\n        <>\n          {replies.length > 0 && (\n            <div className={repliesClass}>\n              {hasUnreadReplies && (\n                <Button\n                  dataElement=\"markAllReadButton\"\n                  className=\"mark-all-read-button\"\n                  label={t('action.markAllRead')}\n                  onClick={markAllRepliesRead}\n                />\n              )}\n              {replies.map((reply, i) => (\n                <div className=\"reply\" id={`note_reply_${reply.Id}`} key={`note_reply_${reply.Id}`}>\n                  <NoteContent\n                    noteIndex={i + 1}\n                    key={reply.Id}\n                    annotation={reply}\n                    setIsEditing={setIsEditing}\n                    isEditing={isEditingMap[i + 1]}\n                    onReplyClicked={handleReplyClicked}\n                    isUnread={unreadAnnotationIdSet.has(reply.Id)}\n                    handleMultiSelect={handleMultiSelect}\n                    isMultiSelected={isMultiSelected}\n                    isMultiSelectMode={isMultiSelectMode}\n                  />\n                </div>\n              ))}\n            </div>\n          )}\n          {isGroup &&\n            <NoteGroupSection\n              groupAnnotations={groupAnnotations}\n              isMultiSelectMode={isMultiSelectMode}\n            />}\n          {showReplyArea && !isMultiSelectMode && (\n            <ReplyArea\n              isUnread={lastReplyId && unreadAnnotationIdSet.has(lastReplyId)}\n              onPendingReplyChange={markAllRepliesRead}\n              annotation={annotation}\n            />\n          )}\n        </>\n      )}\n      {isSelected && (isInNotesPanel || isCustomPanelOpen) && !shouldHideConnectorLine && (\n        <AnnotationNoteConnectorLine\n          annotation={annotation}\n          noteContainerRef={containerRef}\n          isCustomPanelOpen={isCustomPanelOpen}\n        />\n      )}\n    </div>\n  );\n};\n\nNote.propTypes = propTypes;\n\nexport default Note;\n","import Note from './Note';\n\nexport default Note;\n","var api = require(\"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\");\n            var content = require(\"!!../../../../../node_modules/css-loader/index.js!../../../../../node_modules/postcss-loader/src/index.js??postcss!../../../../../node_modules/sass-loader/dist/cjs.js!./InlineCommentingPopup.scss\");\n\n            content = content.__esModule ? content.default : content;\n\n            if (typeof content === 'string') {\n              content = [[module.id, content, '']];\n            }\n\nvar options = {};\n\noptions.insert = function (styleTag) {\n                function findNestedWebComponents(tagName, root = document) {\n                  const elements = [];\n\n                  // Check direct children\n                  root.querySelectorAll(tagName).forEach(el => elements.push(el));\n\n                  // Check shadow DOMs\n                  root.querySelectorAll('*').forEach(el => {\n                    if (el.shadowRoot) {\n                      elements.push(...findNestedWebComponents(tagName, el.shadowRoot));\n                    }\n                  });\n\n                  return elements;\n                }\n                if (!window.isApryseWebViewerWebComponent) {\n                  document.head.appendChild(styleTag);\n                  return;\n                }\n\n                let webComponents;\n                // First we see if the webcomponent is at the document level\n                webComponents = document.getElementsByTagName('apryse-webviewer');\n                // If not, we check have to check if it is nested in another webcomponent\n                if (!webComponents.length) {\n                  webComponents = findNestedWebComponents('apryse-webviewer');\n                }\n                // Now we append the style tag to each webcomponent\n                const clonedStyleTags = [];\n                for (let i = 0; i < webComponents.length; i++) {\n                  const webComponent = webComponents[i];\n                  if (i === 0) {\n                    webComponent.shadowRoot.appendChild(styleTag);\n                    styleTag.onload = function () {\n                      if (clonedStyleTags.length > 0) {\n                        clonedStyleTags.forEach((styleNode) => {\n                          // eslint-disable-next-line no-unsanitized/property\n                          styleNode.innerHTML = styleTag.innerHTML;\n                        });\n                      }\n                    };\n                  } else {\n                    const styleNode = styleTag.cloneNode(true);\n                    webComponent.shadowRoot.appendChild(styleNode);\n                    clonedStyleTags.push(styleNode);\n                  }\n                }\n              };\noptions.singleton = false;\n\nvar update = api(content, options);\n\n\n\nmodule.exports = content.locals || {};","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".open.InlineCommentingPopup{visibility:visible}.closed.InlineCommentingPopup{visibility:hidden}:host{display:inline-block;container-type:inline-size;width:100%;height:100%;overflow:hidden}@media(min-width:901px){.App:not(.is-web-component) .hide-in-desktop{display:none}}@container (min-width: 901px){.hide-in-desktop{display:none}}@media(min-width:641px)and (max-width:900px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .hide-in-tablet{display:none}}@container (min-width: 641px) and (max-width: 900px){.App.is-web-component:not(.is-in-desktop-only-mode) .hide-in-tablet{display:none}}@media(max-width:640px)and (min-width:431px){.App:not(.is-web-component) .hide-in-mobile{display:none}}@container (max-width: 640px) and (min-width: 431px){.App.is-web-component .hide-in-mobile{display:none}}@media(max-width:430px){.App:not(.is-web-component) .hide-in-small-mobile{display:none}}@container (max-width: 430px){.App.is-web-component .hide-in-small-mobile{display:none}}.always-hide{display:none}.InlineCommentingPopup{position:absolute;z-index:70;display:flex;justify-content:center;align-items:center}.InlineCommentingPopup:empty{padding:0}.InlineCommentingPopup .buttons{display:flex}.InlineCommentingPopup .Button{margin:4px;width:32px;height:32px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Button{width:42px;height:42px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Button{width:42px;height:42px}}.InlineCommentingPopup .Button:hover{background:var(--popup-button-hover)}.InlineCommentingPopup .Button:hover:disabled{background:none}.InlineCommentingPopup .Button .Icon{width:18px;height:18px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Button .Icon{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Button .Icon{width:24px;height:24px}}.is-vertical.InlineCommentingPopup .Button.main-menu-button{width:100%;border-radius:0;justify-content:flex-start;padding-left:var(--padding-small);padding-right:var(--padding-small);margin:0 0 var(--padding-tiny) 0}.is-vertical.InlineCommentingPopup .Button.main-menu-button:first-child{margin-top:var(--padding-tiny)}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .is-vertical.InlineCommentingPopup .Button.main-menu-button{width:100%;height:32px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .is-vertical.InlineCommentingPopup .Button.main-menu-button{width:100%;height:32px}}.is-vertical.InlineCommentingPopup .Button.main-menu-button .Icon{margin-right:10px}.is-vertical.InlineCommentingPopup .Button.main-menu-button span{white-space:nowrap}@keyframes bottom-up{0%{transform:translateY(100%)}to{transform:translateY(0)}}@keyframes up-bottom{0%{transform:translateY(0)}to{transform:translateY(100%)}}.InlineCommentingPopup{border-radius:4px;box-shadow:0 0 3px 0 var(--document-box-shadow);background:var(--component-background);align-items:flex-start}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup{position:fixed;left:0;bottom:0;z-index:100;flex-direction:column;justify-content:flex-end;width:100%;background:var(--modal-negative-space)}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup{position:fixed;left:0;bottom:0;z-index:100;flex-direction:column;justify-content:flex-end;width:100%;background:var(--modal-negative-space)}}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup{overflow:auto;max-height:calc(100% - 100px)}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup{overflow:auto;max-height:calc(100% - 100px)}}.InlineCommentingPopup .inline-comment-container{display:flex;flex-direction:column}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .inline-comment-container{flex-basis:auto;width:100%;max-height:40%;background:var(--component-background);box-shadow:0 0 3px 0 var(--document-box-shadow);border-radius:4px 4px 0 0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .inline-comment-container{flex-basis:auto;width:100%;max-height:40%;background:var(--component-background);box-shadow:0 0 3px 0 var(--document-box-shadow);border-radius:4px 4px 0 0}}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .inline-comment-container{width:260px}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .inline-comment-container{width:260px}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .inline-comment-container.expanded{flex-grow:1;max-height:90%}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .inline-comment-container.expanded{flex-grow:1;max-height:90%}}.InlineCommentingPopup .inline-comment-container .inline-comment-header{flex-grow:0;flex-shrink:0;display:flex;flex-direction:row;align-items:center}.InlineCommentingPopup .inline-comment-container .inline-comment-header .inline-comment-header-title{flex-grow:1;font-size:16px}.InlineCommentingPopup .inline-comment-container .inline-comment-header .Button{margin:4px}.InlineCommentingPopup .Note{border-radius:0;background:none;margin:0;cursor:default}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Note{flex-grow:1;display:flex;flex-direction:column;overflow:auto;box-shadow:0 0 3px 0 var(--document-box-shadow)}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Note{flex-grow:1;display:flex;flex-direction:column;overflow:auto;box-shadow:0 0 3px 0 var(--document-box-shadow)}}@media(min-width:641px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Note{box-shadow:none}}@container (min-width: 641px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Note{box-shadow:none}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Note>div:not(:nth-last-child(2)){flex-grow:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Note>div:not(:nth-last-child(2)){flex-grow:0}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Note>div:nth-last-child(2){flex-grow:1}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Note>div:nth-last-child(2){flex-grow:1}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Note>.NoteContent:only-child{flex-grow:1}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Note>.NoteContent:only-child{flex-grow:1}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Note>.NoteContent:only-child .edit-content{flex-grow:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Note>.NoteContent:only-child .edit-content{flex-grow:0}}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .NoteHeader{flex-grow:0}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .NoteHeader{flex-grow:0}}.InlineCommentingPopup .NoteContent .edit-content{margin-top:16px}.InlineCommentingPopup .note-popup-options:not(.options-reply){top:33px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .ql-container,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .ql-editor,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .quill{font-size:16px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .ql-container,.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .ql-editor,.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .quill{font-size:16px}}.InlineCommentingPopup .Button,.InlineCommentingPopup .Button.add-attachment,.InlineCommentingPopup .Button.reply-button{margin:0}.InlineCommentingPopup .Button.add-attachment .Icon,.InlineCommentingPopup .Button.reply-button .Icon{width:22px;height:22px}.InlineCommentingPopup .Button.add-attachment{width:24px;height:24px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Button.add-attachment{width:24px;height:24px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Button.add-attachment{width:24px;height:24px}}.InlineCommentingPopup .Button.note-popup-toggle-trigger,.InlineCommentingPopup .Button.reply-button{width:28px;height:28px}@media(max-width:640px){.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Button.note-popup-toggle-trigger,.App:not(.is-in-desktop-only-mode):not(.is-web-component) .InlineCommentingPopup .Button.reply-button{width:28px;height:28px}}@container (max-width: 640px){.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Button.note-popup-toggle-trigger,.App.is-web-component:not(.is-in-desktop-only-mode) .InlineCommentingPopup .Button.reply-button{width:28px;height:28px}}.sb-show-main .InlineCommentingPopup .quill.comment-textarea{padding:0}\", \"\"]);\n\n// exports\nexports.locals = {\n\t\"LEFT_HEADER_WIDTH\": \"41px\",\n\t\"RIGHT_HEADER_WIDTH\": \"41px\"\n};","import React, { useState } from 'react';\nimport Draggable from 'react-draggable';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport { useTranslation } from 'react-i18next';\n\nimport NoteContext from 'components/Note/Context';\nimport Note from 'components/Note';\nimport ReplyAttachmentPicker from 'components/NotesPanel/ReplyAttachmentPicker';\nimport Button from 'components/Button';\n\nimport DataElements from 'src/constants/dataElement';\n\nimport { mapAnnotationToKey, annotationMapKeys } from 'constants/map';\n\nimport './InlineCommentingPopup.scss';\n\nconst propTypes = {\n  isMobile: PropTypes.bool,\n  isUndraggable: PropTypes.bool,\n  isNotesPanelClosed: PropTypes.bool,\n  popupRef: PropTypes.any,\n  position: PropTypes.object,\n  closeAndReset: PropTypes.func,\n  commentingAnnotation: PropTypes.object,\n  contextValue: PropTypes.object,\n  annotationForAttachment: PropTypes.string,\n  addAttachments: PropTypes.func,\n};\n\nconst InlineCommentingPopup = ({\n  isMobile,\n  isUndraggable,\n  isNotesPanelClosed,\n  popupRef,\n  position,\n  closeAndReset,\n  commentingAnnotation,\n  contextValue,\n  annotationForAttachment,\n  addAttachments,\n}) => {\n  const [t] = useTranslation();\n  const [isExpanded, setExpanded] = useState(false);\n\n  const isTrackedChange = mapAnnotationToKey(commentingAnnotation) === annotationMapKeys.TRACKED_CHANGE;\n\n  const inlineCommentPopup = (\n    <div\n      className={classNames({\n        Popup: true,\n        InlineCommentingPopup: true,\n        open: isNotesPanelClosed,\n        trackedChangePopup: isTrackedChange,\n      })}\n      ref={popupRef}\n      data-element={DataElements.INLINE_COMMENT_POPUP}\n      style={{ ...position }}\n      onMouseMove={(e) => {\n        e.stopPropagation();\n      }}\n      onMouseDown={(e) => {\n        if (isMobile) {\n          e.stopPropagation();\n          closeAndReset();\n        }\n      }}\n      onKeyDown={(e) => {\n        if (e.key === 'Escape') {\n          closeAndReset();\n        }\n      }}\n    >\n      <div\n        className={classNames({\n          'inline-comment-container': true,\n          'expanded': isExpanded,\n        })}\n        onMouseDown={(e) => {\n          if (isMobile) {\n            e.stopPropagation();\n          }\n        }}\n      >\n        {isMobile && (\n          <div className='inline-comment-header'>\n            <Button\n              img={isExpanded ? 'icon-chevron-down' : 'icon-chevron-up'}\n              className=\"expand-arrow\"\n              dataElement={DataElements.INLINE_COMMENT_POPUP_EXPAND_BUTTON}\n              onClick={() => setExpanded(!isExpanded)}\n            />\n            <span className='inline-comment-header-title'>{t('action.comment')}</span>\n            <Button\n              img={'icon-close'}\n              dataElement={DataElements.INLINE_COMMENT_POPUP_CLOSE_BUTTON}\n              onClick={closeAndReset}\n            />\n          </div>\n        )}\n        <NoteContext.Provider value={contextValue}>\n          <Note\n            annotation={commentingAnnotation}\n            isMultiSelected={false}\n            isMultiSelectMode={false}\n            handleMultiSelect={() => { }}\n          />\n          <ReplyAttachmentPicker\n            annotationId={annotationForAttachment}\n            addAttachments={addAttachments}\n          />\n        </NoteContext.Provider>\n      </div>\n    </div>\n  );\n\n  return isUndraggable || isTrackedChange ? (\n    inlineCommentPopup\n  ) : (\n    <Draggable cancel=\".Button, .cell, svg, select, button, input, .quill, .note-text-preview\">{inlineCommentPopup}</Draggable>\n  );\n};\n\nInlineCommentingPopup.propTypes = propTypes;\n\nexport default InlineCommentingPopup;\n","import React, { useState, useRef, useCallback, useLayoutEffect } from 'react';\nimport { useSelector, useDispatch, shallowEqual } from 'react-redux';\nimport InlineCommentingPopup from './InlineCommentingPopup';\nimport core from 'core';\nimport { getAnnotationPopupPositionBasedOn as getPopupPosition } from 'helpers/getPopupPosition';\nimport { getOpenedWarningModal, getOpenedColorPicker, getDatePicker } from 'helpers/getElements';\nimport useOnClickOutside from 'hooks/useOnClickOutside';\nimport actions from 'actions';\nimport selectors from 'selectors';\nimport { isMobile as isPhone, isIE, isMobileDevice } from 'helpers/device';\nimport DataElements from 'constants/dataElement';\nimport getRootNode from 'helpers/getRootNode';\nimport debounce from 'lodash/debounce';\nimport PropTypes from 'prop-types';\nimport { workerTypes } from 'constants/types';\n\nconst propTypes = {\n  annotation: PropTypes.object,\n  closeAndReset: PropTypes.func,\n};\n\nconst InlineCommentingPopupContainer = ({ annotation, closeAndReset }) => {\n  const [\n    isNotesPanelOpen,\n    notesInLeftPanel,\n    isLeftPanelOpen,\n    activeLeftPanel,\n    showAnnotationNumbering,\n    sortStrategy,\n    isDocumentReadOnly,\n    activeDocumentViewerKey,\n  ] = useSelector(\n    (state) => [\n      selectors.isElementOpen(state, DataElements.NOTES_PANEL),\n      selectors.getNotesInLeftPanel(state),\n      selectors.isElementOpen(state, DataElements.LEFT_PANEL),\n      selectors.getActiveLeftPanel(state),\n      selectors.isAnnotationNumberingEnabled(state),\n      selectors.getSortStrategy(state),\n      selectors.isDocumentReadOnly(state),\n      selectors.getActiveDocumentViewerKey(state),\n    ],\n    shallowEqual,\n  );\n  const dispatch = useDispatch();\n  const [position, setPosition] = useState({ left: 0, top: 0 });\n  const popupRef = useRef();\n  // on tablet, the behaviour will be like on desktop, except being draggable\n  const isMobile = isPhone();\n  const isUndraggable = isMobile || !!isMobileDevice || isIE;\n  const isNotesPanelOpenOrActive = isNotesPanelOpen || (notesInLeftPanel && isLeftPanelOpen && activeLeftPanel === 'notesPanel');\n  const sixtyFramesPerSecondIncrement = 16;\n\n  useOnClickOutside(popupRef, (e) => {\n    const notesPanel = getRootNode().querySelector('[data-element=\"notesPanel\"]');\n    const clickedInNotesPanel = notesPanel?.contains(e.target);\n    const noteStateFlyout = getRootNode().querySelector(`[data-element=\"noteStateFlyout-${annotation.Id}\"]`);\n    const clickedInNoteStateFlyout = noteStateFlyout?.contains(e.target);\n    const datePicker = getDatePicker();\n    const warningModal = getOpenedWarningModal();\n    const colorPicker = getOpenedColorPicker();\n\n    // the notes panel has mousedown handlers to handle the opening/closing states of this component\n    // we don't want this handler to run when clicked in the notes panel otherwise the opening/closing states may mess up\n    // for example: click on a note will call core.selectAnnotation which triggers the annotationSelected event\n    // and opens this component. If we don't exclude the notes panel this handler will run and close it after\n    if (!clickedInNotesPanel && !clickedInNoteStateFlyout && !warningModal && !colorPicker && !datePicker) {\n      dispatch(actions.closeElement(DataElements.INLINE_COMMENT_POPUP));\n    }\n  });\n\n  const isNotesPanelClosed = !isNotesPanelOpenOrActive;\n\n  const setPopupPosition = () => {\n    if (isNotesPanelClosed && popupRef.current && !isMobile) {\n      setPosition(getPopupPosition(annotation, popupRef, activeDocumentViewerKey));\n    }\n  };\n\n  useLayoutEffect(() => {\n    setPopupPosition();\n  }, [activeDocumentViewerKey, annotation]);\n\n  const handleResize = debounce(() => {\n    setPopupPosition();\n  }, sixtyFramesPerSecondIncrement, { 'trailing': true, 'leading': false });\n\n  useLayoutEffect(() => {\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n    };\n  }, []);\n\n  // TO-DO refactor: Lines 189-239 was copied from NotesPanel 228-275\n  const [pendingAttachmentMap, setPendingAttachmentMap] = useState({});\n  const addAttachments = (annotationID, attachments) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: [...(map[annotationID] || []), ...attachments]\n    }));\n  };\n\n  const [annotationForAttachment, setAnnotationForAttachment] = useState(undefined);\n\n  const [pendingEditTextMap, setPendingEditTextMap] = useState({});\n  const setPendingEditText = useCallback(\n    (pendingText, annotationID) => {\n      setPendingEditTextMap((map) => ({\n        ...map,\n        [annotationID]: pendingText,\n      }));\n    },\n    [setPendingEditTextMap],\n  );\n\n  const [pendingReplyMap, setPendingReplyMap] = useState({});\n  const setPendingReply = useCallback(\n    (pendingReply, annotationID) => {\n      setPendingReplyMap((map) => ({\n        ...map,\n        [annotationID]: pendingReply,\n      }));\n    },\n    [setPendingReplyMap],\n  );\n  const clearAttachments = (annotationID) => {\n    setPendingAttachmentMap((map) => ({\n      ...map,\n      [annotationID]: []\n    }));\n  };\n  const deleteAttachment = (annotationID, attachment) => {\n    const attachmentList = pendingAttachmentMap[annotationID];\n    if (attachmentList?.length > 0) {\n      const index = attachmentList.indexOf(attachment);\n      if (index > -1) {\n        attachmentList.splice(index, 1);\n        setPendingAttachmentMap((map) => ({\n          ...map,\n          [annotationID]: [...attachmentList]\n        }));\n      }\n    }\n  };\n\n  const contextValue = {\n    searchInput: '',\n    resize: () => {\n      if (core.getDocument()?.getType() === workerTypes.OFFICE_EDITOR) {\n        setPosition(getPopupPosition(annotation, popupRef, activeDocumentViewerKey));\n      }\n    },\n    isSelected: true,\n    isContentEditable: core.canModifyContents(annotation) && !annotation.getContents(),\n    pendingEditTextMap,\n    setPendingEditText,\n    pendingReplyMap,\n    setPendingReply,\n    isDocumentReadOnly,\n    onTopNoteContentClicked: () => { },\n    isExpandedFromSearch: false,\n    scrollToSelectedAnnot: false,\n    sortStrategy,\n    showAnnotationNumbering,\n    setCurAnnotId: setAnnotationForAttachment,\n    pendingAttachmentMap,\n    addAttachments,\n    clearAttachments,\n    deleteAttachment,\n  };\n\n  return (\n    <InlineCommentingPopup\n      isMobile={isMobile}\n      isUndraggable={isUndraggable}\n      isNotesPanelClosed={isNotesPanelClosed}\n      popupRef={popupRef}\n      position={position}\n      closeAndReset={closeAndReset}\n      commentingAnnotation={annotation}\n      contextValue={contextValue}\n      annotationForAttachment={annotationForAttachment}\n      addAttachments={addAttachments}\n    />\n  );\n};\n\nInlineCommentingPopupContainer.propTypes = propTypes;\n\nexport default InlineCommentingPopupContainer;\n","import InlineCommentingPopupContainer from './InlineCommentingPopupContainer';\n\nexport default InlineCommentingPopupContainer;"],"sourceRoot":""}