(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{1035:function(e,t,n){var r,o;window,e.exports=(r=n(0),o=n(23),function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=11)}([function(e,t){e.exports=r},function(e,t,n){e.exports=n(5)()},function(e,t){e.exports=o},function(e,t,n){"use strict";(function(e){var n=function(){if("undefined"!=typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var o=r[n];e.call(t,o[1],o[0])}},t}()}(),r="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,o=void 0!==e&&e.Math===Math?e:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),i="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(o):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)},a=["top","right","bottom","left","width","height","size","weight"],s="undefined"!=typeof MutationObserver,c=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,o=0;function a(){n&&(n=!1,e()),r&&c()}function s(){i(a)}function c(){var e=Date.now();if(n){if(e-o<2)return;r=!0}else n=!0,r=!1,setTimeout(s,20);o=e}return c}(this.refresh.bind(this))}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){r&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){r&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;a.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),u=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},l=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||o},f=m(0,0,0,0);function d(e){return parseFloat(e)||0}function p(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+d(e["border-"+n+"-width"])}),0)}var h="undefined"!=typeof SVGGraphicsElement?function(e){return e instanceof l(e).SVGGraphicsElement}:function(e){return e instanceof l(e).SVGElement&&"function"==typeof e.getBBox};function v(e){return r?h(e)?function(e){var t=e.getBBox();return m(0,0,t.width,t.height)}(e):function(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var r=l(e).getComputedStyle(e),o=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var o=r[n],i=e["padding-"+o];t[o]=d(i)}return t}(r),i=o.left+o.right,a=o.top+o.bottom,s=d(r.width),c=d(r.height);if("border-box"===r.boxSizing&&(Math.round(s+i)!==t&&(s-=p(r,"left","right")+i),Math.round(c+a)!==n&&(c-=p(r,"top","bottom")+a)),!function(e){return e===l(e).document.documentElement}(e)){var u=Math.round(s+i)-t,h=Math.round(c+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(h)&&(c-=h)}return m(o.left,o.top,s,c)}(e):f}function m(e,t,n,r){return{x:e,y:t,width:n,height:r}}var g=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=m(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=v(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),b=function(e,t){var n,r,o,i,a,s,c,l=(r=(n=t).x,o=n.y,i=n.width,a=n.height,s="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(s.prototype),u(c,{x:r,y:o,width:i,height:a,top:o,right:r+i,bottom:a+o,left:r}),c);u(this,{target:e,contentRect:l})},y=function(){function e(e,t,r){if(this.activeObservations_=[],this.observations_=new n,"function"!=typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=r}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new g(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(e instanceof l(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new b(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),w="undefined"!=typeof WeakMap?new WeakMap:new n,_=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=c.getInstance(),r=new y(t,n,this);w.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){_.prototype[e]=function(){var t;return(t=w.get(this))[e].apply(t,arguments)}}));var O=void 0!==o.ResizeObserver?o.ResizeObserver:_;t.a=O}).call(this,n(7))},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=function(e,t){var n,r,o,i=e[1]||"",a=e[3];if(!a)return i;if(t&&"function"==typeof btoa){var s=(n=a,r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),o="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),"/*# ".concat(o," */")),c=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[i].concat(c).concat([s]).join("\n")}return[i].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(r)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);r&&o[c[0]]||(n&&(c[2]?c[2]="".concat(n," and ").concat(c[2]):c[2]=n),t.push(c))}},t}},function(e,t,n){"use strict";var r=n(6);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,n,o,i,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var r=n(9),o=n(10);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]),r(o,{insert:"head",singleton:!1}),e.exports=o.locals||{}},function(e,t,n){"use strict";var r,o=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),i=[];function a(e){for(var t=-1,n=0;n<i.length;n++)if(i[n].identifier===e){t=n;break}return t}function s(e,t){for(var n={},r=[],o=0;o<e.length;o++){var s=e[o],c=t.base?s[0]+t.base:s[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var f=a(l),d={css:s[1],media:s[2],sourceMap:s[3]};-1!==f?(i[f].references++,i[f].updater(d)):i.push({identifier:l,updater:v(d,t),references:1}),r.push(l)}return r}function c(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var i=n.nc;i&&(r.nonce=i)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=o(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,l=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function f(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=l(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var p=null,h=0;function v(e,t){var n,r,o;if(t.singleton){var i=h++;n=p||(p=c(t)),r=f.bind(null,n,i,!1),o=f.bind(null,n,i,!0)}else n=c(t),r=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var n=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=a(n[r]);i[o].references--}for(var c=s(e,t),u=0;u<n.length;u++){var l=a(n[u]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}n=c}}}},function(e,t,n){"use strict";n.r(t);var r=n(4),o=n.n(r)()(!1);o.push([e.i,".reader-mode-spinner-wrapper {\n   position: fixed;\n   width: inherit;\n   background-color: white;\n   opacity: 0.7;\n   display: flex;\n   justify-content: center;\n   align-items: center;\n}\n\n.reader-mode-spinner {\n   position: absolute;\n   height: 60px;\n   width: 60px;\n   margin: 0px auto;\n   -webkit-animation: rotation .6s infinite linear;\n   -moz-animation: rotation .6s infinite linear;\n   -o-animation: rotation .6s infinite linear;\n   animation: rotation .6s infinite linear;\n   border-left: 6px solid rgba(0, 174, 239, .15);\n   border-right: 6px solid rgba(0, 174, 239, .15);\n   border-bottom: 6px solid rgba(0, 174, 239, .15);\n   border-top: 6px solid rgba(0, 174, 239, .8);\n   border-radius: 100%;\n}\n\n@-webkit-keyframes rotation {\n   from {\n      -webkit-transform: rotate(0deg);\n   }\n\n   to {\n      -webkit-transform: rotate(359deg);\n   }\n}\n\n@-moz-keyframes rotation {\n   from {\n      -moz-transform: rotate(0deg);\n   }\n\n   to {\n      -moz-transform: rotate(359deg);\n   }\n}\n\n@-o-keyframes rotation {\n   from {\n      -o-transform: rotate(0deg);\n   }\n\n   to {\n      -o-transform: rotate(359deg);\n   }\n}\n\n@keyframes rotation {\n   from {\n      transform: rotate(0deg);\n   }\n\n   to {\n      transform: rotate(359deg);\n   }\n}\n",""]),t.default=o},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(2),a=n.n(i);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=n(1),u=n.n(c),l=n(3),f=["client","offset","scroll","bounds","margin"];function d(e){var t=[];return f.forEach((function(n){e[n]&&t.push(n)})),t}function p(e,t){var n={};if(t.indexOf("client")>-1&&(n.client={top:e.clientTop,left:e.clientLeft,width:e.clientWidth,height:e.clientHeight}),t.indexOf("offset")>-1&&(n.offset={top:e.offsetTop,left:e.offsetLeft,width:e.offsetWidth,height:e.offsetHeight}),t.indexOf("scroll")>-1&&(n.scroll={top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}),t.indexOf("bounds")>-1){var r=e.getBoundingClientRect();n.bounds={top:r.top,right:r.right,bottom:r.bottom,left:r.left,width:r.width,height:r.height}}if(t.indexOf("margin")>-1){var o=getComputedStyle(e);n.margin={top:o?parseInt(o.marginTop):0,right:o?parseInt(o.marginRight):0,bottom:o?parseInt(o.marginBottom):0,left:o?parseInt(o.marginLeft):0}}return n}function h(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||window}var v,m,g,b=(v=function(e){var t=e.measure,n=e.measureRef,r=e.contentRect;return(0,e.children)({measure:t,measureRef:n,contentRect:r})},g=m=function(e){var t,n;function o(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state={contentRect:{entry:{},client:{},offset:{},scroll:{},bounds:{},margin:{}}},t._animationFrameID=null,t._resizeObserver=null,t._node=null,t._window=null,t.measure=function(e){var n=p(t._node,d(t.props));e&&(n.entry=e[0].contentRect),t._animationFrameID=t._window.requestAnimationFrame((function(){null!==t._resizeObserver&&(t.setState({contentRect:n}),"function"==typeof t.props.onResize&&t.props.onResize(n))}))},t._handleRef=function(e){null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.unobserve(t._node),t._node=e,t._window=h(t._node);var n=t.props.innerRef;n&&("function"==typeof n?n(t._node):n.current=t._node),null!==t._resizeObserver&&null!==t._node&&t._resizeObserver.observe(t._node)},t}n=e,(t=o).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=o.prototype;return i.componentDidMount=function(){this._resizeObserver=null!==this._window&&this._window.ResizeObserver?new this._window.ResizeObserver(this.measure):new l.a(this.measure),null!==this._node&&(this._resizeObserver.observe(this._node),"function"==typeof this.props.onResize&&this.props.onResize(p(this._node,d(this.props))))},i.componentWillUnmount=function(){null!==this._window&&this._window.cancelAnimationFrame(this._animationFrameID),null!==this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)},i.render=function(){var e=this.props,t=(e.innerRef,e.onResize,function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["innerRef","onResize"]));return Object(r.createElement)(v,s({},t,{measureRef:this._handleRef,measure:this.measure,contentRect:this.state.contentRect}))},o}(r.Component),m.propTypes={client:u.a.bool,offset:u.a.bool,scroll:u.a.bool,bounds:u.a.bool,margin:u.a.bool,innerRef:u.a.oneOfType([u.a.object,u.a.func]),onResize:u.a.func},g);b.displayName="Measure",b.propTypes.children=u.a.func;var y=b;function w(e){return"read-mode-page-".concat(e)}function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(i,e);var t,n,r=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),S(R(t=r.call(this,e)),"handleOnLoad",(function(){t.props.page.loaded&&(t.resize(!0),t.getPageDoc().addEventListener("click",t.handleClickEvent),t.pageIframe.current.addEventListener("resize",t.handleResizeEvent))})),S(R(t),"handleClickEvent",(function(e){"A"===e.target.tagName&&e.target.getAttribute("href")&&(e.preventDefault(),t.props.clickLinkHandler(e.target.getAttribute("href")))})),S(R(t),"handleResizeEvent",(function(e){t.resize(e.detail)})),t.pageIframe=o.a.createRef(),t}return t=i,(n=[{key:"componentDidMount",value:function(){this.props.page.loaded&&this.loadContent()}},{key:"componentDidUpdate",value:function(e){e.page!==this.props.page&&this.props.page.loaded&&this.loadContent()}},{key:"componentWillUnmount",value:function(){var e,t,n;null===(e=this.getPageDoc())||void 0===e||e.removeEventListener("click",this.handleClickEvent),null===(t=this.pageIframe)||void 0===t||null===(n=t.current)||void 0===n||n.removeEventListener("resize",this.handleResizeEvent)}},{key:"render",value:function(){return o.a.createElement("iframe",{ref:this.pageIframe,id:w(this.props.index+1),style:{border:"none",width:"100%",height:"500px"},onLoad:this.handleOnLoad})}},{key:"getPageDoc",value:function(){var e,t,n;return null===(e=this.pageIframe)||void 0===e||null===(t=e.current)||void 0===t||null===(n=t.contentWindow)||void 0===n?void 0:n.document}},{key:"getPageDocHtml",value:function(){var e;return null===(e=this.getPageDoc())||void 0===e?void 0:e.getElementsByTagName("html")[0]}},{key:"loadContent",value:function(){var e=this.getPageDoc();e.open(),e.write(this.props.page.content),e.close()}},{key:"resize",value:function(e){var t=this;e?(this.resetZoom(),setTimeout((function(){t.resetHeight()}),100)):this.resetHeight()}},{key:"resetZoom",value:function(){var e=this.getPageDocHtml();if(e)if(window.chrome||navigator.userAgent.indexOf("Safari")>-1)e.style.zoom=this.props.zoom;else{var t=(100/this.props.zoom).toFixed(2);e.style.transform="scale(".concat(this.props.zoom,")"),e.style.transformOrigin="0 0",e.style.width="".concat(t,"%"),e.style.overflow="hidden"}}},{key:"resetHeight",value:function(){var e=this.getPageDocHtml();if(e){this.pageIframe.current.style.height="1px";var t=Math.ceil(e.scrollHeight*this.props.zoom)+1;this.pageIframe.current.style.height=t+"px",this.props.load()}}}])&&E(t.prototype,n),i}(o.a.PureComponent);function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=N(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function N(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t,n,r,o,i,a){try{var s=e[i](a),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function A(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){L(i,r,o,a,s,"next",e)}function s(e){L(i,r,o,a,s,"throw",e)}a(void 0)}))}}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==z(t)&&"function"!=typeof t?H(e):t}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n(8),function(){if("function"==typeof window.CustomEvent)return!1;window.CustomEvent=function(e,t){t=t||{bubbles:!1,cancelable:!1,detail:null};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}}();var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(s,e);var t,n,r,i,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=a.call(this,e)).state={pages:[],zoom:"1",showSpinner:!1},t.initialized=!1,t.isLoading=!1,t.doc=void 0,t.pageObjNumMap=new Map,t.pageNum=1,t.handleLinkClicked=t.handleLinkClicked.bind(H(t)),t.handlePageNumberUpdated=_.debounce(t.handlePageNumberUpdated.bind(H(t)),300),t.load=_.throttle(t.load.bind(H(t)),300),t.resize=_.throttle(t.resize.bind(H(t)),300),t.updatePageNumber=_.throttle(t.updatePageNumber.bind(H(t)),300),t.handleZoomUpdated=_.throttle(t.handleZoomUpdated.bind(H(t)),300),t}return t=s,(n=[{key:"componentDidMount",value:function(){this.viewerElement=document.getElementById("wv-read-mode"),this.load(),this.addOnScrollHandler(),this.props.viewport.addEventListener("pageNumberUpdated",this.handlePageNumberUpdated),this.props.viewport.addEventListener("zoomUpdated",this.handleZoomUpdated)}},{key:"componentWillUnmount",value:function(){this.props.viewport.removeEventListener("pageNumberUpdated",this.handlePageNumberUpdated),this.props.viewport.removeEventListener("zoomUpdated",this.handleZoomUpdated)}},{key:"render",value:function(){var e=this;return o.a.createElement(y,{onResize:this.resize},(function(t){var n=t.measureRef;return o.a.createElement("div",{id:"wv-read-mode",style:{overflowY:"scroll",height:"100%",backgroundColor:"white",width:"inherit"},ref:n},e.state.showSpinner&&o.a.createElement("div",{className:"reader-mode-spinner-wrapper",style:{height:e.viewerElement?e.viewerElement.clientHeight:"500px"}},o.a.createElement("div",{className:"reader-mode-spinner"})),o.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},e.state.pages.map((function(t,n){return o.a.createElement(T,{key:n,page:t,index:n,zoom:e.state.zoom,load:e.load,clickLinkHandler:e.handleLinkClicked})}))))}))}},{key:"getPageElement",value:function(e){return document.getElementById(w(e+1))}},{key:"runLoadingTask",value:function(e){var t=this;this.isLoading=!0,this.props.pdfNet.initialize(void 0,"ems").then((function(){var n=function(){var n=A(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,e();case 3:n.next=8;break;case 5:n.prev=5,n.t0=n.catch(0),console.log(n.t0);case 8:return n.prev=8,t.isLoading=!1,n.finish(8);case 11:case"end":return n.stop()}}),n,null,[[0,5,8,11]])})));return function(){return n.apply(this,arguments)}}();t.props.pdfNet.runWithoutCleanup(n)}))}},{key:"load",value:function(){var e=this;if(!this.isLoading)if(this.initialized){var t=this.getPagesToLoad();if(0===t.length)this.updatePageNumber();else{var n=function(){var n=A(regeneratorRuntime.mark((function n(){var r,o,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=C(t),n.prev=1,r.s();case 3:if((o=r.n()).done){n.next=9;break}return i=o.value,n.next=7,e.loadPageByNum(i);case 7:n.next=3;break;case 9:n.next=14;break;case 11:n.prev=11,n.t0=n.catch(1),r.e(n.t0);case 14:return n.prev=14,r.f(),n.finish(14);case 17:setTimeout((function(){e.updatePageNumber()}),100);case 18:case"end":return n.stop()}}),n,null,[[1,11,14,17]])})));return function(){return n.apply(this,arguments)}}();this.runLoadingTask(n)}}else{var r=function(){var t=A(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.doc;case 2:return e.doc=t.sent,t.next=5,e.doc.initSecurityHandler();case 5:return t.next=7,e.doc.getPageCount();case 7:if(0!==(n=t.sent)){t.next=13;break}e.setState((function(e){return{pages:e.pages.concat({content:"There is no text content in this PDF file.",loaded:!0})}})),t.next=20;break;case 13:r=regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r<5)){t.next=6;break}return t.next=3,e.getPageContent(r,!1,n);case 3:t.t0=t.sent.htmlStr,t.next=7;break;case 6:t.t0="";case 7:o=t.t0,e.setState((function(e){return{pages:e.pages.concat({content:o,loaded:r<5})}}));case 9:case"end":return t.stop()}}),t)})),o=0;case 15:if(!(o<n)){t.next=20;break}return t.delegateYield(r(o),"t0",17);case 17:o++,t.next=15;break;case 20:e.initialized=!0;case 21:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();this.runLoadingTask(r)}}},{key:"getPagesToLoad",value:function(){var e,t=null===(e=this.viewerElement)||void 0===e?void 0:e.getBoundingClientRect();if(t){for(var n=[],r=-1,o=0;o<this.state.pages.length;o++){var i,a=null===(i=this.getPageElement(o))||void 0===i?void 0:i.getBoundingClientRect();if(a){if(a.top>t.bottom){r=o;break}this.state.pages[o].loaded||a.bottom<=t.top||n.push(o)}}return r>0&&!this.state.pages[r].loaded&&n.push(r),n}}},{key:"resize",value:function(e){if(this.initialized)for(var t=0;t<this.state.pages.length;t++){var n;if(this.state.pages[t].loaded){var r=new CustomEvent("resize",{detail:e});null===(n=this.getPageElement(t))||void 0===n||n.dispatchEvent(r)}}}},{key:"getPageContent",value:(i=A(regeneratorRuntime.mark((function e(t){var n,r,o,i,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],a.length>2&&a[2],e.next=5,this.doc.getPage(t+1);case 5:return r=e.sent,e.next=8,r.getSDFObj();case 8:return e.next=10,e.sent.getObjNum();case 10:if(o=e.sent,this.pageObjNumMap.set(o,t),!n){e.next=16;break}e.t0="",e.next=19;break;case 16:return e.next=18,this.props.pdfNet.Convert.pageToHtml(r);case 18:e.t0=e.sent;case 19:return i=e.t0,e.abrupt("return",{htmlStr:i,objNum:o});case 21:case"end":return e.stop()}}),e,this)}))),function(e){return i.apply(this,arguments)})},{key:"loadPageByNum",value:(r=A(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getPageContent(t);case 2:n=e.sent,r=n.htmlStr,this.setState((function(e){var n=j(e.pages);return n[t]={content:r,loaded:!0},{pages:n}}));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"addOnScrollHandler",value:function(){var e=this;this.viewerElement.onscroll=_.throttle((function(){e.load()}),200)}},{key:"handleLinkClicked",value:function(e){var t=this;if(e.match(/^\d+\-0\.html$/)){var n=Number(e.split("-")[0]);if(this.pageObjNumMap.has(n)){var r=this.pageObjNumMap.get(n);this.scrollToPage(r)}else{if(this.isLoading)return;var o=function(){var e=A(regeneratorRuntime.mark((function e(){var r,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.setState({showSpinner:!0}),r=0;case 2:if(!(r<t.state.pages.length)){e.next=16;break}if(!t.state.pages[r].loaded){e.next=5;break}return e.abrupt("continue",13);case 5:return e.next=7,t.getPageContent(r,!0);case 7:if(o=e.sent,i=o.objNum,n!==i){e.next=13;break}return t.setState({showSpinner:!1}),t.scrollToPage(r),e.abrupt("break",16);case 13:r++,e.next=2;break;case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();this.runLoadingTask(o)}}else{var i;null===(i=window)||void 0===i||i.open(e)}}},{key:"scrollToPage",value:function(e){this.viewerElement.scrollTop=this.getPageElement(e).offsetTop-this.viewerElement.offsetTop}},{key:"handlePageNumberUpdated",value:function(e){var t=e.detail;t>this.state.pages.length||t===this.pageNum||(this.scrollToPage(t-1),this.pageNum=t)}},{key:"updatePageNumber",value:function(){var e,t=this,n=null===(e=this.viewerElement)||void 0===e?void 0:e.getBoundingClientRect();if(n){var r=(n.top+n.bottom)/2,o=function(e){var n;return null===(n=t.getPageElement(e))||void 0===n?void 0:n.getBoundingClientRect()},i=function(e){e!==t.pageNum&&(t.pageNum=e,t.props.pageNumberUpdateHandler&&t.props.pageNumberUpdateHandler(e))},a=o(this.state.pages.length-1);if(a&&n.bottom===a.bottom)i(this.state.pages.length);else for(var s=0;s<this.state.pages.length;s++){var c=o(s);if(c&&(n.top===c.top&&0===s||r>=c.top&&r<=c.bottom)){i(s+1);break}}}}},{key:"handleZoomUpdated",value:function(e){var t=e.detail.toString();this.setState({zoom:t}),this.resize(!0)}}])&&D(t.prototype,n),s}(o.a.PureComponent),F={initialize:function(e){return{pdfNet:e,viewerElement:void 0,render:function(e,t,n){this.viewerElement=t,this.unmount(),a.a.render(o.a.createElement(W,{doc:e,pdfNet:this.pdfNet,viewport:this.viewerElement,pageNumberUpdateHandler:n}),this.viewerElement)},goToPage:function(e){var t=new CustomEvent("pageNumberUpdated",{detail:e});this.viewerElement.dispatchEvent(t)},setZoom:function(e){var t=new CustomEvent("zoomUpdated",{detail:e});this.viewerElement.dispatchEvent(t)},unmount:function(){this.viewerElement&&a.a.unmountComponentAtNode(this.viewerElement)}}}};t.default=F,window.WebViewerReadingMode=F}]))}}]);